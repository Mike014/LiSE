
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>LiSE &#8212; LiSE 0.13.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ELiDE" href="../ELiDE/index.html" />
    <link rel="prev" title="Introduction" href="../manual.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="lise">
<h1>LiSE<a class="headerlink" href="#lise" title="Permalink to this heading">¶</a></h1>
<p>The only LiSE class that you should ever instantiate yourself is
<code class="docutils literal notranslate"><span class="pre">Engine</span></code>. All the other simulation objects should be
created and accessed through it. By default, it keeps the simulation
code and world state in the working directory, but you can pass in another
directory if you prefer. Either use it with a context manager
(<code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">Engine()</span> <span class="pre">as</span> <span class="pre">eng:</span></code>) or call its <code class="docutils literal notranslate"><span class="pre">.close()</span></code> method when you’re done
changing things.</p>
<section id="world-modelling">
<h2>World Modelling<a class="headerlink" href="#world-modelling" title="Permalink to this heading">¶</a></h2>
<p>Start by calling the engine’s <code class="docutils literal notranslate"><span class="pre">new_character</span></code> method with a string
<code class="docutils literal notranslate"><span class="pre">name</span></code>.  This will return a character object with the name you
provided. Now draw a map by calling the method <code class="docutils literal notranslate"><span class="pre">new_place</span></code> with many
different string <code class="docutils literal notranslate"><span class="pre">name</span></code> s, then linking them together with the
method <code class="docutils literal notranslate"><span class="pre">new_portal(origin,</span> <span class="pre">destination)</span></code>.  To store data pertaining
to some particular place, retrieve the place from the <code class="docutils literal notranslate"><span class="pre">place</span></code>
mapping of the character: if the character is <code class="docutils literal notranslate"><span class="pre">world</span></code> and the place
name is <code class="docutils literal notranslate"><span class="pre">'home'</span></code>, you might do it like
<code class="docutils literal notranslate"><span class="pre">home</span> <span class="pre">=</span> <span class="pre">world.place['home']</span></code>. Portals are retrieved from the <code class="docutils literal notranslate"><span class="pre">portal</span></code>
mapping, where you’ll need the origin and the destination: if there’s
a portal from <code class="docutils literal notranslate"><span class="pre">'home'</span></code> to <code class="docutils literal notranslate"><span class="pre">'narnia'</span></code>, you can get it like
<code class="docutils literal notranslate"><span class="pre">wardrobe</span> <span class="pre">=</span> <span class="pre">world.portal['home']['narnia']</span></code>, but if you haven’t also
made another portal going the other way,
<code class="docutils literal notranslate"><span class="pre">world.portal['narnia']['home']</span></code> will raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>.</p>
<p>Things, usually being located in places (but possibly in other things),
are most conveniently created by the <code class="docutils literal notranslate"><span class="pre">new_thing</span></code> method of Place objects:
<code class="docutils literal notranslate"><span class="pre">alice</span> <span class="pre">=</span> <span class="pre">home.new_thing('alice')</span></code> gets you a new Thing object
located in <code class="docutils literal notranslate"><span class="pre">home</span></code>. Things can be retrieved like <code class="docutils literal notranslate"><span class="pre">alice</span> <span class="pre">=</span> <span class="pre">world.thing['alice']</span></code>.
Ultimately, things and places are both just nodes, and both can be
retrieved in a character’s <code class="docutils literal notranslate"><span class="pre">node</span></code> mapping, but only things have
methods like <code class="docutils literal notranslate"><span class="pre">travel_to</span></code>, which finds a path to a destination
and schedules movement along it.</p>
<p>You can store data in things, places, and portals by treating them
like dictionaries.  If you want to store data in a character, use its
<code class="docutils literal notranslate"><span class="pre">stat</span></code> property as a dictionary instead. Data stored in these
objects, and in the <code class="docutils literal notranslate"><span class="pre">universal</span></code> property of the engine, can vary
over time. The engine’s <code class="docutils literal notranslate"><span class="pre">eternal</span></code> property is not time-sensitive,
and is mainly for storing settings, not simulation data.</p>
</section>
<section id="rule-creation">
<h2>Rule Creation<a class="headerlink" href="#rule-creation" title="Permalink to this heading">¶</a></h2>
<p>To create a rule, first decide what objects the rule should apply
to. You can put a rule on a character, thing, place, or portal; and
you can put a rule on a character’s <code class="docutils literal notranslate"><span class="pre">thing</span></code>, <code class="docutils literal notranslate"><span class="pre">place</span></code>, and
<code class="docutils literal notranslate"><span class="pre">portal</span></code> mappings, meaning the rule will be applied to <em>every</em> such
entity within the character, even if it didn’t exist when the rule was
declared.</p>
<p>All these items have a property <code class="docutils literal notranslate"><span class="pre">rule</span></code> that can be used as a
decorator. Use this to decorate a function that performs the rule’s
action by making some change to the world state.  Functions decorated
this way always get passed the engine as the first argument and the
character as the second; if the function is more specific than that, a
particular thing, place, or portal will be the third argument. This
will get you a rule object of the same name as your action function.</p>
<p>At first, the rule object will not have any triggers, meaning the action
will never happen. If you want it to run on <em>every</em> tick, call its
<code class="docutils literal notranslate"><span class="pre">always</span></code> method and think no more of it. But if you want to be
more selective, use the rule’s <code class="docutils literal notranslate"><span class="pre">trigger</span></code> decorator on another
function with the same signature, and have it return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the
world is in such a state that the rule ought to run. There is nothing
really stopping you from modifying the rule from inside a trigger, but
it’s not recommended.</p>
<p>If you like, you can also add prerequisites. These are like triggers,
but use the <code class="docutils literal notranslate"><span class="pre">prereq</span></code> decorator, and should return <code class="docutils literal notranslate"><span class="pre">True</span></code> <em>unless</em>
the action should <em>not</em> happen; if a single prerequisite returns
<code class="docutils literal notranslate"><span class="pre">False</span></code>, the action is cancelled.</p>
</section>
<section id="time-control">
<h2>Time Control<a class="headerlink" href="#time-control" title="Permalink to this heading">¶</a></h2>
<p>The current time is always accessible from the engine’s <code class="docutils literal notranslate"><span class="pre">branch</span></code> and
<code class="docutils literal notranslate"><span class="pre">turn</span></code> properties. In the common case where time is advancing
forward one tick at a time, it should be done with the engine’s
<code class="docutils literal notranslate"><span class="pre">next_turn</span></code> method, which polls all the game rules before going to
the next tick; but you can also change the time whenever you want, as
long as <code class="docutils literal notranslate"><span class="pre">branch</span></code> is a string and <code class="docutils literal notranslate"><span class="pre">turn</span></code> is an integer. The rules
will never be followed in response to your changing the time “by
hand”.</p>
<p>It is possible–indeed, expected–to change the time as part of the
action of a rule. This is how you would make something happen after a
delay. Say you want a rule that puts the character <code class="docutils literal notranslate"><span class="pre">alice</span></code> to sleep,
then wakes her up after eight turns (presumably hour-long).:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alice</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">character</span><span class="p">[</span><span class="s1">&#39;alice&#39;</span><span class="p">]</span>

<span class="nd">@alice</span><span class="o">.</span><span class="n">rule</span>
<span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="n">character</span><span class="p">):</span>
    <span class="n">character</span><span class="o">.</span><span class="n">stat</span><span class="p">[</span><span class="s1">&#39;awake&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">start_turn</span> <span class="o">=</span> <span class="n">character</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">turn</span>
    <span class="k">with</span> <span class="n">character</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">plan</span><span class="p">():</span>
        <span class="n">character</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">turn</span> <span class="o">+=</span> <span class="mi">8</span>
        <span class="n">character</span><span class="o">.</span><span class="n">stat</span><span class="p">[</span><span class="s1">&#39;awake&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">character</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">turn</span> <span class="o">=</span> <span class="n">start_turn</span>
</pre></div>
</div>
<p>Remember to set the time back to when you started when you’re done
making all your plans.</p>
</section>
<section id="input-prompts">
<h2>Input Prompts<a class="headerlink" href="#input-prompts" title="Permalink to this heading">¶</a></h2>
<p>LiSE itself doesn’t know what a player is or how to accept input from them,
but does use some conventions for communicating with a user interface
such as ELiDE.</p>
<p>To ask the player to make a decision, first define a method for them to
call, then return a menu description like this one.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@engine</span><span class="o">.</span><span class="n">method</span>
<span class="k">def</span> <span class="nf">wake_alice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">character</span><span class="p">[</span><span class="s1">&#39;alice&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">stat</span><span class="p">[</span><span class="s1">&#39;awake&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">alice</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">character</span><span class="p">[</span><span class="s1">&#39;alice&#39;</span><span class="p">]</span>

<span class="nd">@alice</span><span class="o">.</span><span class="n">rule</span>
<span class="k">def</span> <span class="nf">wakeup</span><span class="p">(</span><span class="n">character</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;Wake up?&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;Yes&quot;</span><span class="p">,</span> <span class="n">character</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">wake_alice</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;No&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)]</span>
</pre></div>
</div>
<p>Only methods defined with the <code class="docutils literal notranslate"><span class="pre">&#64;engine.method</span></code> decorator may be used in a menu.</p>
</section>
<section id="module-LiSE.engine">
<span id="engine"></span><h2>engine<a class="headerlink" href="#module-LiSE.engine" title="Permalink to this heading">¶</a></h2>
<p>The “engine” of LiSE is an object relational mapper with special
stores for game data and entities, as well as properties for manipulating the
flow of time.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.AbstractSchema">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.engine.</span></span><span class="sig-name descname"><span class="pre">AbstractSchema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractEngine</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/engine.html#AbstractSchema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.AbstractSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for schemas describing what changes are permitted to the game world</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.DummyEntity">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.engine.</span></span><span class="sig-name descname"><span class="pre">DummyEntity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractEngine</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/engine.html#DummyEntity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.DummyEntity" title="Permalink to this definition">¶</a></dt>
<dd><p>Something to use in place of a node or edge</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.engine.</span></span><span class="sig-name descname"><span class="pre">Engine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix:</span> <span class="pre">~typing.Union[~os.PathLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str]</span> <span class="pre">=</span> <span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">string:</span> <span class="pre">~typing.Optional[~typing.Union[~LiSE.xcollections.StringStore</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict]]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trigger:</span> <span class="pre">~typing.Optional[~typing.Union[~LiSE.xcollections.FunctionStore</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module]]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prereq:</span> <span class="pre">~typing.Optional[~typing.Union[~LiSE.xcollections.FunctionStore</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module]]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action:</span> <span class="pre">~typing.Optional[~typing.Union[~LiSE.xcollections.FunctionStore</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module]]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function:</span> <span class="pre">~typing.Optional[~typing.Union[~LiSE.xcollections.FunctionStore</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module]]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method:</span> <span class="pre">~typing.Optional[~typing.Union[~LiSE.xcollections.MethodStore</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module]]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_string:</span> <span class="pre">~typing.Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_args:</span> <span class="pre">~typing.Optional[dict]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_cls:</span> <span class="pre">~typing.Type[~LiSE.engine.AbstractSchema]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'LiSE.engine.NullSchema'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alchemy=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush_interval=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyframe_interval=10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_interval=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed:</span> <span class="pre">~typing.Optional[int]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logfun:</span> <span class="pre">~typing.Optional[function]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_rules_journal=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyframe_on_close=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_arranger=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine" title="Permalink to this definition">¶</a></dt>
<dd><p>LiSE, the Life Simulator Engine.</p>
<p>Each instance of LiSE maintains a connection to a database
representing the state of a simulated world. Simulation rules
within this world are described by lists of Python functions, some
of which make changes to the world.</p>
<p>The top-level data structure within LiSE is the character. Most
data within the world model is kept in some character or other;
these will quite frequently represent people, but can be readily
adapted to represent any kind of data that can be comfortably
described as a graph or a JSON object. Every change to a character
will be written to the database.</p>
<p>LiSE tracks history as a series of turns. In each turn, each
simulation rule is evaluated once for each of the simulated
entities it’s been applied to. World changes in a given turn are
remembered together, such that the whole world state can be
rewound: simply set the properties <code class="docutils literal notranslate"><span class="pre">branch</span></code> and <code class="docutils literal notranslate"><span class="pre">turn</span></code> back to
what they were just before the change you want to undo.</p>
<p>Properties:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">branch</span></code>: The fork of the timestream that we’re on.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turn</span></code>: Units of time that have passed since the sim started.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">time</span></code>: <code class="docutils literal notranslate"><span class="pre">(branch,</span> <span class="pre">turn)</span></code>, and you can register functions to be called
when the time changes, as <code class="docutils literal notranslate"><span class="pre">eng.time.connect(func)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tick</span></code>: A counter of how many changes have occurred this turn.
Can be set manually, but is more often set to the last tick in a turn
as a side effect of setting <code class="docutils literal notranslate"><span class="pre">turn</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">character</span></code>: A mapping of <a class="reference internal" href="#LiSE.engine.Engine.Character" title="LiSE.engine.Engine.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a> objects by name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rule</span></code>: A mapping of all rules that have been made.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rulebook</span></code>: A mapping of lists of rules. They are followed in
their order.  A whole rulebook full of rules may be assigned to
an entity at once.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trigger</span></code>: Functions that might trigger a rule.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prereq</span></code>: Functions a rule might require to return
<code class="docutils literal notranslate"><span class="pre">True</span></code> for it to run.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">action</span></code>: Functions that might manipulate the world
state as a result of a rule running.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code>: Extension methods to be added to the engine object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">function</span></code>: Generic functions. All of <code class="docutils literal notranslate"><span class="pre">trigger</span></code>, <code class="docutils literal notranslate"><span class="pre">prereq</span></code>,
<code class="docutils literal notranslate"><span class="pre">action</span></code>, <code class="docutils literal notranslate"><span class="pre">method</span></code>, and <code class="docutils literal notranslate"><span class="pre">function</span></code> are modules or similar;
they default to <code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionStore</span></code> objects, which can write
Python code to the underlying module at runtime.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">string</span></code>: A mapping of strings, probably shown to the player
at some point. Defaults to a <code class="xref py py-class docutils literal notranslate"><span class="pre">StringStore</span></code> object,
which can alter the underlying JSON file at runtime.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eternal</span></code>: Mapping of arbitrary serializable objects. It isn’t
sensitive to sim-time. A good place to keep game settings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">universal</span></code>: Another mapping of arbitrary serializable
objects, but this one <em>is</em> sensitive to sim-time. Each turn, the
state of the randomizer is saved here under the key
<code class="docutils literal notranslate"><span class="pre">'rando_state'</span></code>.</p></li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Character</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character" title="Permalink to this definition">¶</a></dt>
<dd><p>A digraph that follows game rules and has a containment hierarchy</p>
<p>Nodes in a Character are subcategorized into Things and
Places. Things have locations, and those locations may be Places
or other Things. To get at those, use the <cite>thing</cite> and <cite>place</cite>
mappings – but in situations where the distinction does not matter,
you may simply address the Character as a mapping, as in NetworkX.</p>
<p>Characters may have units in other Characters. These are just
nodes. You can apply rules to a Character’s units, and thus to
any collection of nodes you want, perhaps in many different
Characters. The <cite>unit</cite> attribute handles this. It is a mapping,
keyed by the other Character’s name, then by the name of the node
that is this Character’s unit. In the common case where a
Character has exactly one unit, it may be retrieved as
<cite>unit.only</cite>. When it has more than one unit, but only has
any units in a single other Character, you can get the mapping
of units in that Character as <cite>unit.node</cite>. Add units with the
<cite>add_unit</cite> method and remove them with <cite>del_unit</cite>.</p>
<p>You can assign rules to Characters with their <cite>rule</cite> attribute,
typically using it as a decorator (see the documentation for
the <cite>rule</cite> module). You can do the same to some of Character’s
attributes:</p>
<ul class="simple">
<li><p><cite>thing.rule</cite> to make a rule run on all Things in this Character
every turn</p></li>
<li><p><cite>place.rule</cite> to make a rule run on all Places in this Character
every turn</p></li>
<li><p><cite>node.rule</cite> to make a rule run on all Things and Places in this
Character every turn</p></li>
<li><p><cite>unit.rule</cite> to make a rule run on all the units this
Character has every turn, regardless of what Character the
unit is in</p></li>
<li><p><cite>adj.rule</cite> to make a rule run on all the edges this Character
has every turn</p></li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.PlaceMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PlaceMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.PlaceMapping" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Place</span></code> objects that are in a <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.PlaceMapping.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">E</span></span></em>, <span class="optional">]</span><em class="sig-param"><span class="n"><span class="pre">**F</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None.</span>&#160; <span class="pre">Update</span> <span class="pre">D</span> <span class="pre">from</span> <span class="pre">mapping/iterable</span> <span class="pre">E</span> <span class="pre">and</span> <span class="pre">F.</span></span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.PlaceMapping.update" title="Permalink to this definition">¶</a></dt>
<dd><p>If E present and has a .keys() method, does:     for k in E: D[k] = E[k]
If E present and lacks .keys() method, does:     for (k, v) in E: D[k] = v
In either case, this is followed by: for k, v in F.items(): D[k] = v</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.PortalPredecessorsMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PortalPredecessorsMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.PortalPredecessorsMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping of nodes that have at least one incoming edge.</p>
<p>Maps to another mapping keyed by the origin nodes, which maps to
Portal objects.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.PortalPredecessorsMapping.Predecessors">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Predecessors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.PortalPredecessorsMapping.Predecessors" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping of possible origins from some destination.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.PortalSuccessorsMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PortalSuccessorsMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.PortalSuccessorsMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping of nodes that have at least one outgoing edge.</p>
<p>Maps them to another mapping, keyed by the destination nodes,
which maps to Portal objects.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.PortalSuccessorsMapping.Successors">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Successors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.PortalSuccessorsMapping.Successors" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping for possible destinations from some node.</p>
<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.PortalSuccessorsMapping.Successors.engine">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.PortalSuccessorsMapping.Successors.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.PortalSuccessorsMapping.Successors.send">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.PortalSuccessorsMapping.Successors.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Call all listeners to <code class="docutils literal notranslate"><span class="pre">dest</span></code> and to my <code class="docutils literal notranslate"><span class="pre">orig</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.PortalSuccessorsMapping.Successors.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">E</span></span></em>, <span class="optional">]</span><em class="sig-param"><span class="n"><span class="pre">**F</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None.</span>&#160; <span class="pre">Update</span> <span class="pre">D</span> <span class="pre">from</span> <span class="pre">mapping/iterable</span> <span class="pre">E</span> <span class="pre">and</span> <span class="pre">F.</span></span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.PortalSuccessorsMapping.Successors.update" title="Permalink to this definition">¶</a></dt>
<dd><p>If E present and has a .keys() method, does:     for k in E: D[k] = E[k]
If E present and lacks .keys() method, does:     for (k, v) in E: D[k] = v
In either case, this is followed by: for k, v in F.items(): D[k] = v</p>
</dd></dl>

</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.PortalSuccessorsMapping.character">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">character</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.PortalSuccessorsMapping.character" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.PortalSuccessorsMapping.engine">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.PortalSuccessorsMapping.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.PortalSuccessorsMapping.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.PortalSuccessorsMapping.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively update the stats of all portals</p>
<p>Input should be a dictionary of dictionaries of dictionaries
–just like networkx <code class="docutils literal notranslate"><span class="pre">DiGraph._edge</span></code>.</p>
<p>This will create portals as needed, but will only delete
them if you set their value to <code class="docutils literal notranslate"><span class="pre">None</span></code>. Likewise, stats
not specified in the input will be left untouched, if they
are already present, but you can set them to <code class="docutils literal notranslate"><span class="pre">None</span></code> to
delete them.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.ThingMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ThingMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.ThingMapping" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Thing</span></code> objects that are in a <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></p>
<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.ThingMapping.engine">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.ThingMapping.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.ThingMapping.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.ThingMapping.name" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.ThingPlaceMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ThingPlaceMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.ThingPlaceMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>GraphNodeMapping but for Place and Thing</p>
<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.ThingPlaceMapping.character">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">character</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.ThingPlaceMapping.character" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.ThingPlaceMapping.engine">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.ThingPlaceMapping.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.ThingPlaceMapping.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.ThingPlaceMapping.name" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.UnitGraphMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">UnitGraphMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">char</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.UnitGraphMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>A mapping of other characters in which one has a unit.</p>
<p>Maps to a mapping of the units themselves, unless there’s
only one other character you have units in, in which case
this maps to those.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.UnitGraphMapping.CharacterUnitMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CharacterUnitMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graphn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.UnitGraphMapping.CharacterUnitMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping of units of one Character in another Character.</p>
<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.UnitGraphMapping.CharacterUnitMapping.only">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">only</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.UnitGraphMapping.CharacterUnitMapping.only" title="Permalink to this definition">¶</a></dt>
<dd><p>If I have only one unit, return it; else error</p>
</dd></dl>

</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.UnitGraphMapping.engine">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.UnitGraphMapping.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.UnitGraphMapping.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.UnitGraphMapping.name" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.UnitGraphMapping.node">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">node</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.UnitGraphMapping.node" title="Permalink to this definition">¶</a></dt>
<dd><p>If I have units in only one graph, return a map of them</p>
<p>Otherwise, raise AttributeError.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.UnitGraphMapping.only">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">only</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.UnitGraphMapping.only" title="Permalink to this definition">¶</a></dt>
<dd><p>If I have only one unit, this is it</p>
<p>Otherwise, raise AttributeError.</p>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.add_places_from">
<span class="sig-name descname"><span class="pre">add_places_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.add_places_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a series of place names and add the lot.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.add_portal">
<span class="sig-name descname"><span class="pre">add_portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symmetrical</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.add_portal" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect the origin to the destination with a <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>.</p>
<p>Keyword arguments are the <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>’s
attributes. Exception: if keyword <code class="docutils literal notranslate"><span class="pre">symmetrical</span></code> == <code class="docutils literal notranslate"><span class="pre">True</span></code>,
a mirror-<code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> will be placed in the opposite
direction between the same nodes. It will always appear to
have the placed <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>’s stats, and any change to the
mirror <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>’s stats will affect the placed
<code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.add_portals_from">
<span class="sig-name descname"><span class="pre">add_portals_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symmetrical</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.add_portals_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Make portals for a sequence of (origin, destination) pairs</p>
<p>Actually, triples are acceptable too, in which case the third
item is a dictionary of stats for the new <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>.</p>
<p>If optional argument <code class="docutils literal notranslate"><span class="pre">symmetrical</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, all
the <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> instances will have a mirror portal going
in the opposite direction, which will always have the same
stats.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.add_thing">
<span class="sig-name descname"><span class="pre">add_thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.add_thing" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a new Thing and set its location</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.add_unit">
<span class="sig-name descname"><span class="pre">add_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.add_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Start keeping track of a unit</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.adj_cls">
<span class="sig-name descname"><span class="pre">adj_cls</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.adj_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.engine.Engine.Character.PortalSuccessorsMapping" title="LiSE.character.Character.PortalSuccessorsMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">PortalSuccessorsMapping</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.historical">
<span class="sig-name descname"><span class="pre">historical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stat</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.historical" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a historical view on the given stat</p>
<p>This functions like the value of the stat, but changes
when you time travel. Comparisons performed on the
historical view can be passed to <code class="docutils literal notranslate"><span class="pre">engine.turns_when</span></code>
to find out when the comparison held true.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.node_map_cls">
<span class="sig-name descname"><span class="pre">node_map_cls</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.node_map_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.engine.Engine.Character.ThingPlaceMapping" title="LiSE.character.Character.ThingPlaceMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThingPlaceMapping</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.place2thing">
<span class="sig-name descname"><span class="pre">place2thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.place2thing" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a Place into a Thing with the given location.</p>
<p>It will keep all its attached Portals.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.portals">
<span class="sig-name descname"><span class="pre">portals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.portals" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all portals.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.pred_cls">
<span class="sig-name descname"><span class="pre">pred_cls</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.pred_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.engine.Engine.Character.PortalPredecessorsMapping" title="LiSE.character.Character.PortalPredecessorsMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">PortalPredecessorsMapping</span></code></a></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.remove_portal">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_portal</span></span><a class="headerlink" href="#LiSE.engine.Engine.Character.remove_portal" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.remove_unit">
<span class="sig-name descname"><span class="pre">remove_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.remove_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>This is no longer my unit, though it still exists</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.thing2place">
<span class="sig-name descname"><span class="pre">thing2place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.thing2place" title="Permalink to this definition">¶</a></dt>
<dd><p>Unset a Thing’s location, and thus turn it into a Place.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Character.units">
<span class="sig-name descname"><span class="pre">units</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Character.units" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all my units</p>
<p>Regardless of what character they are in.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Place">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clobber</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Place" title="Permalink to this definition">¶</a></dt>
<dd><p>The kind of node where a thing might ultimately be located.</p>
<p>LiSE entities are truthy so long as they exist, falsy if they’ve
been deleted.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Place.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Place.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove myself from the world model immediately.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Portal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Portal" title="Permalink to this definition">¶</a></dt>
<dd><p>Connection between two Places that Things may travel along.</p>
<p>Portals are one-way, but you can make one appear two-way by
setting the <code class="docutils literal notranslate"><span class="pre">symmetrical</span></code> key to <code class="docutils literal notranslate"><span class="pre">True</span></code>,
eg. <code class="docutils literal notranslate"><span class="pre">character.add_portal(orig,</span> <span class="pre">dest,</span> <span class="pre">symmetrical=True)</span></code>.
The portal going the other way will appear to have all the
stats of this one, and attempting to set a stat on it will
set it here instead.</p>
<p>LiSE entities are truthy so long as they exist, falsy if they’ve
been deleted.</p>
<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Portal.character">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">character</span></span><a class="headerlink" href="#LiSE.engine.Engine.Portal.character" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Portal.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Portal.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove myself from my <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code>.</p>
<p>For symmetry with <code class="xref py py-class docutils literal notranslate"><span class="pre">Thing</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Place</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Portal.engine">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#LiSE.engine.Engine.Portal.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Portal.historical">
<span class="sig-name descname"><span class="pre">historical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stat</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Portal.historical" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a reference to the values that a stat has had in the past.</p>
<p>You can use the reference in comparisons to make a history
query, and execute the query by calling it, or passing it to
<code class="docutils literal notranslate"><span class="pre">self.engine.ticks_when</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Portal.reciprocal">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">reciprocal</span></span><a class="headerlink" href="#LiSE.engine.Engine.Portal.reciprocal" title="Permalink to this definition">¶</a></dt>
<dd><p>If there’s another Portal connecting the same origin and
destination that I do, but going the opposite way, return
it. Else raise KeyError.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Portal.unwrap">
<span class="sig-name descname"><span class="pre">unwrap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Portal.unwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Deep copy myself as a dict, all contents unwrapped</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Portal.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">e</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping" title="(in Python v3.10)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Portal.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Works like regular update, but less</p>
<p>Only actually updates when the new value and the old value differ.
This is necessary to prevent certain infinite loops.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.QueryEngine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">QueryEngine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dbstring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alchemy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strings_filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pack</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unpack</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.QueryEngine" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py exception">
<dt class="sig sig-object py" id="LiSE.engine.Engine.QueryEngine.IntegrityError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">IntegrityError</span></span><a class="headerlink" href="#LiSE.engine.Engine.QueryEngine.IntegrityError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="LiSE.engine.Engine.QueryEngine.OperationalError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">OperationalError</span></span><a class="headerlink" href="#LiSE.engine.Engine.QueryEngine.OperationalError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.QueryEngine.exist_edge">
<span class="sig-name descname"><span class="pre">exist_edge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.QueryEngine.exist_edge" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare whether or not this edge exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.QueryEngine.exist_node">
<span class="sig-name descname"><span class="pre">exist_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extant</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.QueryEngine.exist_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare that the node exists or doesn’t.</p>
<p>Inserts a new record or updates an old one, as needed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.QueryEngine.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.QueryEngine.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Put all pending changes into the SQL transaction.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Thing">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clobber</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Thing" title="Permalink to this definition">¶</a></dt>
<dd><p>The sort of item that has a particular location at any given time.</p>
<p>Things are always in Places or other Things, and may additionally be
travelling through a Portal.</p>
<p>LiSE entities are truthy so long as they exist, falsy if they’ve
been deleted.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Thing.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Thing.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Unset everything.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Thing.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.engine.Engine.Thing.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Get rid of this, starting now.</p>
<p>Apart from deleting the node, this also informs all its users
that it doesn’t exist and therefore can’t be their avatar
anymore.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Thing.follow_path">
<span class="sig-name descname"><span class="pre">follow_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#LiSE.engine.Engine.Thing.follow_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Go to several nodes in succession, deciding how long to
spend in each by consulting the <code class="docutils literal notranslate"><span class="pre">weight</span></code> stat of the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> connecting the one node to the next,
default 1 turn.</p>
<p>Return the total number of turns the travel will take. Raise
<code class="xref py py-class docutils literal notranslate"><span class="pre">TravelException</span></code> if I can’t follow the whole path,
either because some of its nodes don’t exist, or because I’m
scheduled to be somewhere else.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Thing.go_to_place">
<span class="sig-name descname"><span class="pre">go_to_place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">place</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#LiSE.node.Node" title="LiSE.node.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#LiSE.engine.Engine.Thing.go_to_place" title="Permalink to this definition">¶</a></dt>
<dd><p>Assuming I’m in a node that has a <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> direct
to the given node, schedule myself to travel to the
given <code class="xref py py-class docutils literal notranslate"><span class="pre">Place</span></code>, taking an amount of time indicated by
the <code class="docutils literal notranslate"><span class="pre">weight</span></code> stat on the <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>, if given; else 1
turn.</p>
<p>Return the number of turns the travel will take.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Thing.location">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">location</span></span><a class="headerlink" href="#LiSE.engine.Engine.Thing.location" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">Thing</span></code> or <code class="docutils literal notranslate"><span class="pre">Place</span></code> I’m in.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.Thing.travel_to">
<span class="sig-name descname"><span class="pre">travel_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#LiSE.node.Node" title="LiSE.node.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><span class="pre">AbstractCharacter</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#LiSE.engine.Engine.Thing.travel_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the shortest path to the given node from where I am
now, and follow it.</p>
<p>If supplied, the <code class="docutils literal notranslate"><span class="pre">weight</span></code> stat of each <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> along
the path will be used in pathfinding, and for deciding how
long to stay in each Place along the way.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">graph</span></code> argument may be any NetworkX-style graph. It
will be used for pathfinding if supplied, otherwise I’ll use
my <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code>. In either case, however, I will attempt
to actually follow the path using my <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code>, which
might not be possible if the supplied <code class="docutils literal notranslate"><span class="pre">graph</span></code> and my
<code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code> are too different. If it’s not possible,
I’ll raise a <code class="xref py py-class docutils literal notranslate"><span class="pre">TravelException</span></code>, whose <code class="docutils literal notranslate"><span class="pre">subpath</span></code>
attribute holds the part of the path that I <em>can</em> follow. To
make me follow it, pass it to my <code class="docutils literal notranslate"><span class="pre">follow_path</span></code> method.</p>
<p>Return value is the number of turns the travel will take.</p>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.add_character">
<span class="sig-name descname"><span class="pre">add_character</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Graph</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.add_character"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.add_character" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new character.</p>
<p>You’ll be able to access it as a <a class="reference internal" href="#LiSE.engine.Engine.Character" title="LiSE.engine.Engine.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a> object by
looking up <code class="docutils literal notranslate"><span class="pre">name</span></code> in my <code class="docutils literal notranslate"><span class="pre">character</span></code> property.</p>
<p><code class="docutils literal notranslate"><span class="pre">data</span></code>, if provided, should be a networkx-compatible graph
object. Your new character will be a copy of it.</p>
<p>Any keyword arguments will be set as stats of the new character.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.advance">
<span class="sig-name descname"><span class="pre">advance</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.advance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.advance" title="Permalink to this definition">¶</a></dt>
<dd><p>Follow the next rule if available.</p>
<p>If we’ve run out of rules, reset the rules iterator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.alias">
<span class="sig-name descname"><span class="pre">alias</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">stat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'dummy'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">EntityStatAccessor</span></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.alias"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a pointer to a value for use in historical queries.</p>
<p>It will behave much as if you assigned the value to some entity
and then used its <code class="docutils literal notranslate"><span class="pre">historical</span></code> method to get a reference to
the set of its past values, which happens to contain only the
value you’ve provided here, <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>v</strong> – the value to represent</p></li>
<li><p><strong>stat</strong> – what name to pretend its stat has; usually irrelevant</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.apply_choices">
<span class="sig-name descname"><span class="pre">apply_choices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">choices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perfectionist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.apply_choices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.apply_choices" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate changes a player wants to make, and apply if acceptable.</p>
<p>Returns a pair of lists containing acceptance and rejection messages,
which the UI may present as it sees fit. They are always in a pair
with the change request as the zeroth item. The message may be None
or a string.</p>
<p>Validator functions may return only a boolean indicating acceptance.
If they instead return a pair, the initial boolean indicates
acceptance and the following item is the message.</p>
<p>This function will not actually result in any simulation happening.
It creates a plan. See my <code class="docutils literal notranslate"><span class="pre">plan</span></code> context manager for the precise
meaning of this.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">dry_run=True</span></code> just return the acceptances and rejections
without really planning anything. With <code class="docutils literal notranslate"><span class="pre">perfectionist=True</span></code> apply
changes if and only if all of them are accepted.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.engine.Engine.char_cls">
<span class="sig-name descname"><span class="pre">char_cls</span></span><a class="headerlink" href="#LiSE.engine.Engine.char_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.engine.Engine.Character" title="LiSE.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit changes and close the database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.commit">
<span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.commit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the state of all graphs and commit the transaction.</p>
<p>Also saves the current branch, turn, and tick.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.critical">
<span class="sig-name descname"><span class="pre">critical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.critical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.critical" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a message at level ‘critical’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.debug">
<span class="sig-name descname"><span class="pre">debug</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.debug"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a message at level ‘debug’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.del_character">
<span class="sig-name descname"><span class="pre">del_character</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.del_character"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.del_character" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the Character from the database entirely.</p>
<p>This also deletes all its history. You’d better be sure.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.engine.Engine.edge_cls">
<span class="sig-name descname"><span class="pre">edge_cls</span></span><a class="headerlink" href="#LiSE.engine.Engine.edge_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.portal.Portal" title="LiSE.portal.Portal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.error">
<span class="sig-name descname"><span class="pre">error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a message at level ‘error’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.get_delta">
<span class="sig-name descname"><span class="pre">get_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn_from</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick_from</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn_to</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick_to</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.get_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.get_delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dictionary describing changes to the world.</p>
<p>Most keys will be character names, and their values will be
dictionaries of the character’s stats’ new values, with <code class="docutils literal notranslate"><span class="pre">None</span></code>
for deleted keys. Characters’ dictionaries have special keys
‘nodes’ and ‘edges’ which contain booleans indicating whether
the node or edge exists at the moment, and ‘node_val’ and
‘edge_val’ for the stats of those entities. For edges (also
called portals) these dictionaries are two layers deep, keyed
first by the origin, then by the destination.</p>
<p>Characters also have special keys for the various rulebooks
they have:</p>
<ul class="simple">
<li><p>‘character_rulebook’</p></li>
<li><p>‘unit_rulebook’</p></li>
<li><p>‘character_thing_rulebook’</p></li>
<li><p>‘character_place_rulebook’</p></li>
<li><p>‘character_portal_rulebook’</p></li>
</ul>
<p>And each node and edge may have a ‘rulebook’ stat of its own.
If a node is a thing, it gets a ‘location’; when the ‘location’
is deleted, that means it’s back to being a place.</p>
<p>Keys at the top level that are not character names:</p>
<ul class="simple">
<li><p>‘rulebooks’, a dictionary keyed by the name of each changed
rulebook, the value being a list of rule names</p></li>
<li><p>‘rules’, a dictionary keyed by the name of each changed rule,
containing any of the lists ‘triggers’, ‘prereqs’, and ‘actions’</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.get_turn_delta">
<span class="sig-name descname"><span class="pre">get_turn_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_tick</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.get_turn_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.get_turn_delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dictionary of changes to the world within a given turn</p>
<p>Defaults to the present turn, and stops at the present tick
unless specified.</p>
<p>See the documentation for <code class="docutils literal notranslate"><span class="pre">get_delta</span></code> for a detailed
description of the delta format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>branch</strong> – branch of history, defaulting to the present branch</p></li>
<li><p><strong>turn</strong> – turn within the branch, defaulting to the present
turn</p></li>
<li><p><strong>tick</strong> – tick at which to stop the delta, defaulting to the
present tick</p></li>
<li><p><strong>start_tick</strong> – tick at which to start the delta, default 0</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.info">
<span class="sig-name descname"><span class="pre">info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a message at level ‘info’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.new_character">
<span class="sig-name descname"><span class="pre">new_character</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Graph</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#LiSE.engine.Engine.Character" title="LiSE.character.Character"><span class="pre">Character</span></a></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.new_character"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.new_character" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and return a new <a class="reference internal" href="#LiSE.engine.Engine.Character" title="LiSE.engine.Engine.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.new_graph">
<span class="sig-name descname"><span class="pre">new_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Graph</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#LiSE.engine.Engine.Character" title="LiSE.character.Character"><span class="pre">Character</span></a></span></span><a class="headerlink" href="#LiSE.engine.Engine.new_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and return a new <a class="reference internal" href="#LiSE.engine.Engine.Character" title="LiSE.engine.Engine.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.engine.Engine.node_cls">
<span class="sig-name descname"><span class="pre">node_cls</span></span><a class="headerlink" href="#LiSE.engine.Engine.node_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.place.Place" title="LiSE.place.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">Place</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.engine.Engine.place_cls">
<span class="sig-name descname"><span class="pre">place_cls</span></span><a class="headerlink" href="#LiSE.engine.Engine.place_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.place.Place" title="LiSE.place.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">Place</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.engine.Engine.portal_cls">
<span class="sig-name descname"><span class="pre">portal_cls</span></span><a class="headerlink" href="#LiSE.engine.Engine.portal_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.portal.Portal" title="LiSE.portal.Portal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.engine.Engine.query_engine_cls">
<span class="sig-name descname"><span class="pre">query_engine_cls</span></span><a class="headerlink" href="#LiSE.engine.Engine.query_engine_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.query.QueryEngine" title="LiSE.query.QueryEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueryEngine</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.engine.Engine.thing_cls">
<span class="sig-name descname"><span class="pre">thing_cls</span></span><a class="headerlink" href="#LiSE.engine.Engine.thing_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.thing.Thing" title="LiSE.thing.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">Thing</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.turns_when">
<span class="sig-name descname"><span class="pre">turns_when</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qry</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.turns_when"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.turns_when" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield the turns in this branch when the query held true</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>qry</strong> – a Query, likely constructed by comparing the result
of a call to an entity’s <code class="docutils literal notranslate"><span class="pre">historical</span></code> method with
the output of <code class="docutils literal notranslate"><span class="pre">self.alias(..)</span></code> or another
<code class="docutils literal notranslate"><span class="pre">historical(..)</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.engine.Engine.warning">
<span class="sig-name descname"><span class="pre">warning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/engine.html#Engine.warning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.Engine.warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a message at level ‘warning’</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="LiSE.engine.InnerStopIteration">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.engine.</span></span><span class="sig-name descname"><span class="pre">InnerStopIteration</span></span><a class="reference internal" href="../_modules/LiSE/engine.html#InnerStopIteration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.InnerStopIteration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.NextTurn">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.engine.</span></span><span class="sig-name descname"><span class="pre">NextTurn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractEngine</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/engine.html#NextTurn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.NextTurn" title="Permalink to this definition">¶</a></dt>
<dd><p>Make time move forward in the simulation.</p>
<p>Calls <code class="docutils literal notranslate"><span class="pre">advance</span></code> repeatedly, returning a list of the rules’ return values.</p>
<p>I am also a <code class="docutils literal notranslate"><span class="pre">Signal</span></code>, so you can register functions to be
called when the simulation runs. Pass them to my <code class="docutils literal notranslate"><span class="pre">connect</span></code>
method.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.engine.NullSchema">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.engine.</span></span><span class="sig-name descname"><span class="pre">NullSchema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractEngine</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/engine.html#NullSchema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.engine.NullSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Schema that permits all changes to the game world</p>
</dd></dl>

</section>
<section id="module-LiSE.node">
<span id="node"></span><h2>node<a class="headerlink" href="#module-LiSE.node" title="Permalink to this heading">¶</a></h2>
<p>A base class for nodes that can be in a character.</p>
<p>Every actual node that you’re meant to use will be a place or
thing. This module is for what they have in common.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.node.Node">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.node.</span></span><span class="sig-name descname"><span class="pre">Node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clobber</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node" title="Permalink to this definition">¶</a></dt>
<dd><p>The fundamental graph component, which edges (in LiSE, “portals”)
go between.</p>
<p>Every LiSE node is either a thing or a place. They share in common
the abilities to follow rules; to be connected by portals; and to
contain things.</p>
<p>This is truthy if it exists, falsy if it’s been deleted.</p>
<dl class="py property">
<dt class="sig sig-object py" id="LiSE.node.Node.adj">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">adj</span></span><a class="headerlink" href="#LiSE.node.Node.adj" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.node.Node.character">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">character</span></span><a class="headerlink" href="#LiSE.node.Node.character" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete everything</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Get rid of this, starting now.</p>
<p>Apart from deleting the node, this also informs all its users
that it doesn’t exist and therefore can’t be their avatar
anymore.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.node.Node.edge">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">edge</span></span><a class="headerlink" href="#LiSE.node.Node.edge" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.node.Node.engine">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#LiSE.node.Node.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.historical">
<span class="sig-name descname"><span class="pre">historical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.historical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.historical" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a reference to the values that a stat has had in the past.</p>
<p>You can use the reference in comparisons to make a history
query, and execute the query by calling it, or passing it to
<code class="docutils literal notranslate"><span class="pre">self.engine.ticks_when</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.node.Node.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#LiSE.node.Node.name" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.new_thing">
<span class="sig-name descname"><span class="pre">new_thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">stats</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.new_thing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.new_thing" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new thing, located here, and return it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.one_way">
<span class="sig-name descname"><span class="pre">one_way</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">stats</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.one_way"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.one_way" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect a portal from here to another node, and return it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.one_way_portal">
<span class="sig-name descname"><span class="pre">one_way_portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">stats</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.one_way_portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.one_way_portal" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect a portal from here to another node, and return it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.path_exists">
<span class="sig-name descname"><span class="pre">path_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.path_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.path_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether there is a path leading from me to <code class="docutils literal notranslate"><span class="pre">dest</span></code>.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">weight</span></code>, only consider edges that have a stat by the
given name.</p>
<p>Raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if <code class="docutils literal notranslate"><span class="pre">dest</span></code> is not a node in my character
or the name of one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.portals">
<span class="sig-name descname"><span class="pre">portals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.portals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.portals" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> objects that lead away from me</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.node.Node.pred">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pred</span></span><a class="headerlink" href="#LiSE.node.Node.pred" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.node.Node.predecessor">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">predecessor</span></span><a class="headerlink" href="#LiSE.node.Node.predecessor" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.predecessors">
<span class="sig-name descname"><span class="pre">predecessors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.predecessors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.predecessors" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over nodes with edges leading here from there.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.preportals">
<span class="sig-name descname"><span class="pre">preportals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.preportals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.preportals" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> objects that lead to me</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.shortest_path">
<span class="sig-name descname"><span class="pre">shortest_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.shortest_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.shortest_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of node names leading from me to <code class="docutils literal notranslate"><span class="pre">dest</span></code>.</p>
<p>Raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if <code class="docutils literal notranslate"><span class="pre">dest</span></code> is not a node in my character
or the name of one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.shortest_path_length">
<span class="sig-name descname"><span class="pre">shortest_path_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.shortest_path_length"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.shortest_path_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the length of the path from me to <code class="docutils literal notranslate"><span class="pre">dest</span></code>.</p>
<p>Raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if <code class="docutils literal notranslate"><span class="pre">dest</span></code> is not a node in my character
or the name of one.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.node.Node.successor">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">successor</span></span><a class="headerlink" href="#LiSE.node.Node.successor" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.successors">
<span class="sig-name descname"><span class="pre">successors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.successors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.successors" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over nodes with edges leading from here to there.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.two_way">
<span class="sig-name descname"><span class="pre">two_way</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">stats</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.two_way"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.two_way" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect these nodes with a two-way portal and return it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.node.Node.two_way_portal">
<span class="sig-name descname"><span class="pre">two_way_portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">stats</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#Node.two_way_portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.Node.two_way_portal" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect these nodes with a two-way portal and return it.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.node.UserMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.node.</span></span><span class="sig-name descname"><span class="pre">UserMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/node.html#UserMapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.node.UserMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>A mapping of the characters that have a particular node as an avatar.</p>
<p>Getting characters from here isn’t any better than getting them from
the engine direct, but with this you can do things like use the
.get() method to get a character if it’s a user and otherwise
get something else; or test whether the character’s name is in
the keys; and so on.</p>
<dl class="py property">
<dt class="sig sig-object py" id="LiSE.node.UserMapping.engine">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#LiSE.node.UserMapping.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-LiSE.place">
<span id="place"></span><h2>place<a class="headerlink" href="#module-LiSE.place" title="Permalink to this heading">¶</a></h2>
<p>The type of node that is a location.</p>
<p>Though both things and places are nodes, things are obliged to be
located in another node. Places are not.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.place.Place">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.place.</span></span><span class="sig-name descname"><span class="pre">Place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clobber</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/place.html#Place"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.place.Place" title="Permalink to this definition">¶</a></dt>
<dd><p>The kind of node where a thing might ultimately be located.</p>
<p>LiSE entities are truthy so long as they exist, falsy if they’ve
been deleted.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.place.Place.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/place.html#Place.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.place.Place.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove myself from the world model immediately.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-LiSE.thing">
<span id="thing"></span><h2>thing<a class="headerlink" href="#module-LiSE.thing" title="Permalink to this heading">¶</a></h2>
<p>The sort of node that is ultimately located in a Place.</p>
<p>Things may be located in other Things as well, but eventually must be
recursively located in a Place.</p>
<p>There’s a subtle distinction between “location” and “containment”: a
Thing may be contained by a Portal, but cannot be located there –
only in one of the Portal’s endpoints. Things are both located in and
contained by Places, or possibly other Things.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.thing.Thing">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.thing.</span></span><span class="sig-name descname"><span class="pre">Thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clobber</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/thing.html#Thing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.thing.Thing" title="Permalink to this definition">¶</a></dt>
<dd><p>The sort of item that has a particular location at any given time.</p>
<p>Things are always in Places or other Things, and may additionally be
travelling through a Portal.</p>
<p>LiSE entities are truthy so long as they exist, falsy if they’ve
been deleted.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.thing.Thing.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/thing.html#Thing.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.thing.Thing.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Unset everything.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.thing.Thing.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/thing.html#Thing.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.thing.Thing.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Get rid of this, starting now.</p>
<p>Apart from deleting the node, this also informs all its users
that it doesn’t exist and therefore can’t be their avatar
anymore.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.thing.Thing.follow_path">
<span class="sig-name descname"><span class="pre">follow_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/LiSE/thing.html#Thing.follow_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.thing.Thing.follow_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Go to several nodes in succession, deciding how long to
spend in each by consulting the <code class="docutils literal notranslate"><span class="pre">weight</span></code> stat of the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> connecting the one node to the next,
default 1 turn.</p>
<p>Return the total number of turns the travel will take. Raise
<code class="xref py py-class docutils literal notranslate"><span class="pre">TravelException</span></code> if I can’t follow the whole path,
either because some of its nodes don’t exist, or because I’m
scheduled to be somewhere else.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.thing.Thing.go_to_place">
<span class="sig-name descname"><span class="pre">go_to_place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">place</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#LiSE.node.Node" title="LiSE.node.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/LiSE/thing.html#Thing.go_to_place"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.thing.Thing.go_to_place" title="Permalink to this definition">¶</a></dt>
<dd><p>Assuming I’m in a node that has a <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> direct
to the given node, schedule myself to travel to the
given <code class="xref py py-class docutils literal notranslate"><span class="pre">Place</span></code>, taking an amount of time indicated by
the <code class="docutils literal notranslate"><span class="pre">weight</span></code> stat on the <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>, if given; else 1
turn.</p>
<p>Return the number of turns the travel will take.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.thing.Thing.location">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">location</span></span><a class="headerlink" href="#LiSE.thing.Thing.location" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">Thing</span></code> or <code class="docutils literal notranslate"><span class="pre">Place</span></code> I’m in.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.thing.Thing.travel_to">
<span class="sig-name descname"><span class="pre">travel_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#LiSE.node.Node" title="LiSE.node.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><span class="pre">AbstractCharacter</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/LiSE/thing.html#Thing.travel_to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.thing.Thing.travel_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the shortest path to the given node from where I am
now, and follow it.</p>
<p>If supplied, the <code class="docutils literal notranslate"><span class="pre">weight</span></code> stat of each <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> along
the path will be used in pathfinding, and for deciding how
long to stay in each Place along the way.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">graph</span></code> argument may be any NetworkX-style graph. It
will be used for pathfinding if supplied, otherwise I’ll use
my <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code>. In either case, however, I will attempt
to actually follow the path using my <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code>, which
might not be possible if the supplied <code class="docutils literal notranslate"><span class="pre">graph</span></code> and my
<code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code> are too different. If it’s not possible,
I’ll raise a <code class="xref py py-class docutils literal notranslate"><span class="pre">TravelException</span></code>, whose <code class="docutils literal notranslate"><span class="pre">subpath</span></code>
attribute holds the part of the path that I <em>can</em> follow. To
make me follow it, pass it to my <code class="docutils literal notranslate"><span class="pre">follow_path</span></code> method.</p>
<p>Return value is the number of turns the travel will take.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-LiSE.portal">
<span id="portal"></span><h2>portal<a class="headerlink" href="#module-LiSE.portal" title="Permalink to this heading">¶</a></h2>
<p>Directed edges, as used by LiSE.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.portal.Portal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.portal.</span></span><span class="sig-name descname"><span class="pre">Portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/portal.html#Portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.portal.Portal" title="Permalink to this definition">¶</a></dt>
<dd><p>Connection between two Places that Things may travel along.</p>
<p>Portals are one-way, but you can make one appear two-way by
setting the <code class="docutils literal notranslate"><span class="pre">symmetrical</span></code> key to <code class="docutils literal notranslate"><span class="pre">True</span></code>,
eg. <code class="docutils literal notranslate"><span class="pre">character.add_portal(orig,</span> <span class="pre">dest,</span> <span class="pre">symmetrical=True)</span></code>.
The portal going the other way will appear to have all the
stats of this one, and attempting to set a stat on it will
set it here instead.</p>
<p>LiSE entities are truthy so long as they exist, falsy if they’ve
been deleted.</p>
<dl class="py property">
<dt class="sig sig-object py" id="LiSE.portal.Portal.character">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">character</span></span><a class="headerlink" href="#LiSE.portal.Portal.character" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.portal.Portal.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/portal.html#Portal.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.portal.Portal.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove myself from my <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code>.</p>
<p>For symmetry with <code class="xref py py-class docutils literal notranslate"><span class="pre">Thing</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Place</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.portal.Portal.engine">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#LiSE.portal.Portal.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>attrgetter(attr, …) –&gt; attrgetter object</p>
<p>Return a callable object that fetches the given attribute(s) from its operand.
After f = attrgetter(‘name’), the call f(r) returns r.name.
After g = attrgetter(‘name’, ‘date’), the call g(r) returns (r.name, r.date).
After h = attrgetter(‘name.first’, ‘name.last’), the call h(r) returns
(r.name.first, r.name.last).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.portal.Portal.historical">
<span class="sig-name descname"><span class="pre">historical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/portal.html#Portal.historical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.portal.Portal.historical" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a reference to the values that a stat has had in the past.</p>
<p>You can use the reference in comparisons to make a history
query, and execute the query by calling it, or passing it to
<code class="docutils literal notranslate"><span class="pre">self.engine.ticks_when</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.portal.Portal.reciprocal">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">reciprocal</span></span><a class="headerlink" href="#LiSE.portal.Portal.reciprocal" title="Permalink to this definition">¶</a></dt>
<dd><p>If there’s another Portal connecting the same origin and
destination that I do, but going the opposite way, return
it. Else raise KeyError.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.portal.Portal.unwrap">
<span class="sig-name descname"><span class="pre">unwrap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/portal.html#Portal.unwrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.portal.Portal.unwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Deep copy myself as a dict, all contents unwrapped</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.portal.Portal.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">e</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping" title="(in Python v3.10)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/portal.html#Portal.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.portal.Portal.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Works like regular update, but less</p>
<p>Only actually updates when the new value and the old value differ.
This is necessary to prevent certain infinite loops.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.portal.RuleMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.portal.</span></span><span class="sig-name descname"><span class="pre">RuleMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">portal</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/portal.html#RuleMapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.portal.RuleMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping to get rules followed by a portal.</p>
</dd></dl>

</section>
<section id="module-LiSE.rule">
<span id="rule"></span><h2>rule<a class="headerlink" href="#module-LiSE.rule" title="Permalink to this heading">¶</a></h2>
<p>The fundamental unit of game logic, the Rule, and structures to
store and organize them in.</p>
<p>A Rule is three lists of functions: triggers, prereqs, and actions.
The actions do something, anything that you need your game to do, but
probably making a specific change to the world model. The triggers and
prereqs between them specify when the action should occur: any of its
triggers can tell it to happen, but then any of its prereqs may stop it
from happening.</p>
<p>Rules are assembled into RuleBooks, essentially just lists of Rules
that can then be assigned to be followed by any game entity –
but each game entity has its own RuleBook by default, and you never
need to change that.</p>
<p>To add a new rule to a LiSE entity, the easiest thing is to use the
decorator syntax::
&gt;&#64;entity.rule
&gt;def do_something(entity):
&gt;       …
&gt;
&gt;&#64;do_something.trigger
&gt;def whenever(entity):
&gt;       …
&gt;
&gt;&#64;do_something.trigger
&gt;def forever(entity):
&gt;       ….
&gt;
&gt;&#64;do_something.action
&gt;def do_something_else(entity):
&gt;       …
&gt;</p>
<p>When run, this code will:
* copy the <cite>do_something</cite> function to <cite>action.py</cite>, where LiSE knows
to run it when a rule triggers it
* create a new rule named <cite>‘do_something’</cite>
* set the function <cite>do_something</cite> as the first (and, so far, only) entry
in the actions list of the rule by that name
* copy the <cite>whenever</cite> function to <cite>trigger.py</cite>, where LiSE knows to
call it when a rule has it as a trigger
* set the function <cite>whenever</cite> as the first entry in the triggers list
of the rule <cite>‘do_something’</cite>
* append the function <cite>forever</cite> to the same triggers list
* copy <cite>do_something_else</cite> to <cite>action.py</cite>
* append <cite>do_something_else</cite> to the actions list of the rule</p>
<p>The <cite>trigger</cite>, <cite>prereq</cite>, and <cite>action</cite> attributes of Rule objects
may also be used like lists. You can put functions in them yourself,
provided they are already present in the correct module. If it’s
inconvenient to get the actual function object, use a string of
the function’s name.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.rule.ActionList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.rule.</span></span><span class="sig-name descname"><span class="pre">ActionList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rule</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#ActionList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.ActionList" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of action functions for rules</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.rule.AllRuleBooks">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.rule.</span></span><span class="sig-name descname"><span class="pre">AllRuleBooks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#AllRuleBooks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.AllRuleBooks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.rule.AllRules">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.rule.</span></span><span class="sig-name descname"><span class="pre">AllRules</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#AllRules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.AllRules" title="Permalink to this definition">¶</a></dt>
<dd><p>A mapping of every rule in the game.</p>
<p>You can use this as a decorator to make a rule and not assign it
to anything.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.rule.AllRules.new_empty">
<span class="sig-name descname"><span class="pre">new_empty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#AllRules.new_empty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.AllRules.new_empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a new rule with no actions or anything, and return it.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.rule.PrereqList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.rule.</span></span><span class="sig-name descname"><span class="pre">PrereqList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rule</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#PrereqList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.PrereqList" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of prereq functions for rules</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.rule.Rule">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.rule.</span></span><span class="sig-name descname"><span class="pre">Rule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triggers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prereqs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#Rule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.Rule" title="Permalink to this definition">¶</a></dt>
<dd><p>Stuff that might happen in the simulation under some conditions</p>
<p>Rules are comprised of three lists of functions:</p>
<ul class="simple">
<li><p>actions, which mutate the world state</p></li>
<li><p>triggers, which make the actions happen</p></li>
<li><p>prereqs, which prevent the actions from happening when triggered</p></li>
</ul>
<p>Each kind of function should be stored in the appropriate module
supplied to the LiSE core at startup. This makes it possible to
load the functions on later startups. You may instead use the string
name of a function already stored in the module, or use the
<cite>trigger</cite>, <cite>prereq</cite>, or <cite>action</cite> decorator on a new function to
add it to both the module and the rule.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.rule.Rule.action">
<span class="sig-name descname"><span class="pre">action</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#Rule.action"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.Rule.action" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to append the function to my actions list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.rule.Rule.always">
<span class="sig-name descname"><span class="pre">always</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#Rule.always"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.Rule.always" title="Permalink to this definition">¶</a></dt>
<dd><p>Arrange to be triggered every tick, regardless of circumstance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.rule.Rule.duplicate">
<span class="sig-name descname"><span class="pre">duplicate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">newname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#Rule.duplicate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.Rule.duplicate" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new rule that’s just like this one, but under a new
name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.rule.Rule.prereq">
<span class="sig-name descname"><span class="pre">prereq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#Rule.prereq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.Rule.prereq" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to append the function to my prereqs list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.rule.Rule.trigger">
<span class="sig-name descname"><span class="pre">trigger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#Rule.trigger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.Rule.trigger" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to append the function to my triggers list.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.rule.RuleBook">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.rule.</span></span><span class="sig-name descname"><span class="pre">RuleBook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#RuleBook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.RuleBook" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of rules to be followed for some Character, or a part of it
anyway.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.rule.RuleBook.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">integer</span> <span class="pre">--</span> <span class="pre">return</span> <span class="pre">first</span> <span class="pre">index</span> <span class="pre">of</span> <span class="pre">value.</span></span></span><a class="reference internal" href="../_modules/LiSE/rule.html#RuleBook.index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.RuleBook.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises ValueError if the value is not present.</p>
<p>Supporting start and stop arguments is optional, but
recommended.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.rule.RuleBook.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#RuleBook.insert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.RuleBook.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>S.insert(index, value) – insert value before index</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.rule.RuleFollower">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.rule.</span></span><span class="sig-name descname"><span class="pre">RuleFollower</span></span><a class="reference internal" href="../_modules/LiSE/rule.html#RuleFollower"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.RuleFollower" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface for that which has a rulebook associated, which you can
get a <a class="reference internal" href="#LiSE.rule.RuleMapping" title="LiSE.rule.RuleMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuleMapping</span></code></a> into</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.rule.RuleFuncList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.rule.</span></span><span class="sig-name descname"><span class="pre">RuleFuncList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rule</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#RuleFuncList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.RuleFuncList" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract class for lists of functions like trigger, prereq, action</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.rule.RuleFuncList.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#RuleFuncList.append"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.RuleFuncList.append" title="Permalink to this definition">¶</a></dt>
<dd><p>S.append(value) – append value to the end of the sequence</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.rule.RuleFuncList.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">integer</span> <span class="pre">--</span> <span class="pre">return</span> <span class="pre">first</span> <span class="pre">index</span> <span class="pre">of</span> <span class="pre">value.</span></span></span><a class="reference internal" href="../_modules/LiSE/rule.html#RuleFuncList.index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.RuleFuncList.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises ValueError if the value is not present.</p>
<p>Supporting start and stop arguments is optional, but
recommended.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.rule.RuleFuncList.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#RuleFuncList.insert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.RuleFuncList.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>S.insert(index, value) – insert value before index</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.rule.RuleFuncListDescriptor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.rule.</span></span><span class="sig-name descname"><span class="pre">RuleFuncListDescriptor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#RuleFuncListDescriptor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.RuleFuncListDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Descriptor that lets you get and set a whole RuleFuncList at once</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.rule.RuleMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.rule.</span></span><span class="sig-name descname"><span class="pre">RuleMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rulebook</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#RuleMapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.RuleMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps a <a class="reference internal" href="#LiSE.rule.RuleBook" title="LiSE.rule.RuleBook"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuleBook</span></code></a> so you can get its rules by name.</p>
<p>You can access the rules in this either dictionary-style or as
attributes. This is for convenience if you want to get at a rule’s
decorators, eg. to add an Action to the rule.</p>
<p>Using this as a decorator will create a new rule, named for the
decorated function, and using the decorated function as the
initial Action.</p>
<p>Using this like a dictionary will let you create new rules,
appending them onto the underlying <a class="reference internal" href="#LiSE.rule.RuleBook" title="LiSE.rule.RuleBook"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuleBook</span></code></a>; replace one
rule with another, where the new one will have the same index in
the <a class="reference internal" href="#LiSE.rule.RuleBook" title="LiSE.rule.RuleBook"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuleBook</span></code></a> as the old one; and activate or deactivate
rules. The name of a rule may be used in place of the actual rule,
so long as the rule already exists.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.rule.TriggerList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.rule.</span></span><span class="sig-name descname"><span class="pre">TriggerList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rule</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#TriggerList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.TriggerList" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of trigger functions for rules</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="LiSE.rule.roundtrip_dedent">
<span class="sig-prename descclassname"><span class="pre">LiSE.rule.</span></span><span class="sig-name descname"><span class="pre">roundtrip_dedent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/rule.html#roundtrip_dedent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.rule.roundtrip_dedent" title="Permalink to this definition">¶</a></dt>
<dd><p>Reformat some lines of code into what unparse makes.</p>
</dd></dl>

</section>
<section id="module-LiSE.query">
<span id="query"></span><h2>query<a class="headerlink" href="#module-LiSE.query" title="Permalink to this heading">¶</a></h2>
<p>The query engine provides Pythonic methods to access the database.</p>
<p>This module also contains a notably unfinished implementation of a query
language specific to LiSE. Access some stats using entities’ method
<code class="docutils literal notranslate"><span class="pre">historical</span></code>, and do comparisons on those, and instead of a boolean
result you’ll get a callable object that will return an iterator over
turn numbers in which the comparison evaluated to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.query.QueryEngine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.query.</span></span><span class="sig-name descname"><span class="pre">QueryEngine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dbstring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alchemy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strings_filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pack</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unpack</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/query.html#QueryEngine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.query.QueryEngine" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py exception">
<dt class="sig sig-object py" id="LiSE.query.QueryEngine.IntegrityError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">IntegrityError</span></span><a class="headerlink" href="#LiSE.query.QueryEngine.IntegrityError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="LiSE.query.QueryEngine.OperationalError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">OperationalError</span></span><a class="headerlink" href="#LiSE.query.QueryEngine.OperationalError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.query.QueryEngine.exist_edge">
<span class="sig-name descname"><span class="pre">exist_edge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/query.html#QueryEngine.exist_edge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.query.QueryEngine.exist_edge" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare whether or not this edge exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.query.QueryEngine.exist_node">
<span class="sig-name descname"><span class="pre">exist_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extant</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/query.html#QueryEngine.exist_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.query.QueryEngine.exist_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare that the node exists or doesn’t.</p>
<p>Inserts a new record or updates an old one, as needed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.query.QueryEngine.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/query.html#QueryEngine.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.query.QueryEngine.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Put all pending changes into the SQL transaction.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="LiSE.query.slow_iter_turns_eval_cmp">
<span class="sig-prename descclassname"><span class="pre">LiSE.query.</span></span><span class="sig-name descname"><span class="pre">slow_iter_turns_eval_cmp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oper</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_branch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/query.html#slow_iter_turns_eval_cmp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.query.slow_iter_turns_eval_cmp" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all turns on which a comparison holds.</p>
<p>This is expensive. It evaluates the query for every turn in history.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="LiSE.query.windows_intersection">
<span class="sig-prename descclassname"><span class="pre">LiSE.query.</span></span><span class="sig-name descname"><span class="pre">windows_intersection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">windows</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/query.html#windows_intersection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.query.windows_intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of (beginning, ending), return another describing where they overlap.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="LiSE.query.windows_union">
<span class="sig-prename descclassname"><span class="pre">LiSE.query.</span></span><span class="sig-name descname"><span class="pre">windows_union</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">windows</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/query.html#windows_union"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.query.windows_union" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of (beginning, ending), return a minimal version that contains the same ranges.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="allegedb">
<h2>allegedb<a class="headerlink" href="#allegedb" title="Permalink to this heading">¶</a></h2>
<p>State container and object-relational mapper for versioned graphs.</p>
<p>allegedb serves its own special variant on the networkx
DiGraph class (with more to come). Every change to them is
stored in an SQL database.</p>
<p>This means you can keep multiple versions of one set of graphs and
switch between them without the need to save, load, or run git-checkout.
Just point the ORM at the correct branch and turn, and all of the
graphs in the program will change. All the different branches and
revisions remain in the database to be brought back when needed.</p>
<section id="usage">
<h3>usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">LiSE.allegedb</span> <span class="kn">import</span> <span class="n">ORM</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orm</span> <span class="o">=</span> <span class="n">ORM</span><span class="p">(</span><span class="s1">&#39;sqlite:///test.db&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">orm</span><span class="o">.</span><span class="n">new_digraph</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">([</span><span class="s1">&#39;spam&#39;</span><span class="p">,</span> <span class="s1">&#39;eggs&#39;</span><span class="p">,</span> <span class="s1">&#39;ham&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;spam&#39;</span><span class="p">,</span> <span class="s1">&#39;eggs&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">adj</span>
<span class="go">&lt;LiSE.allegedb.graph.DiGraphSuccessorsMapping object containing {&#39;ham&#39;: {}, &#39;eggs&#39;: {}, &#39;spam&#39;: {&#39;eggs&#39;: {}}}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">g</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orm</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">orm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orm</span> <span class="o">=</span> <span class="n">ORM</span><span class="p">(</span><span class="s1">&#39;sqlite:///test.db&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">orm</span><span class="o">.</span><span class="n">graph</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">adj</span>
<span class="go">&lt;LiSE.allegedb.graph.DiGraphSuccessorsMapping object containing {&#39;ham&#39;: {}, &#39;eggs&#39;: {}, &#39;spam&#39;: {&#39;eggs&#39;: {}}}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">red</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">random_lobster</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blue</span> <span class="o">=</span> <span class="n">orm</span><span class="o">.</span><span class="n">new_digraph</span><span class="p">(</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">red</span><span class="p">)</span>  <span class="c1"># initialize with data from the given graph</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">red</span><span class="o">.</span><span class="n">adj</span> <span class="o">==</span> <span class="n">blue</span><span class="o">.</span><span class="n">adj</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orm</span><span class="o">.</span><span class="n">turn</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blue</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">red</span><span class="o">.</span><span class="n">adj</span> <span class="o">==</span> <span class="n">blue</span><span class="o">.</span><span class="n">adj</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orm</span><span class="o">.</span><span class="n">turn</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># undoing what I did when turn=1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">red</span><span class="o">.</span><span class="n">adj</span> <span class="o">==</span> <span class="n">blue</span><span class="o">.</span><span class="n">adj</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orm</span><span class="o">.</span><span class="n">branch</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>    <span class="c1"># navigating to a branch for the first time creates that branch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orm</span><span class="o">.</span><span class="n">turn</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">red</span><span class="o">.</span><span class="n">adj</span> <span class="o">==</span> <span class="n">blue</span><span class="o">.</span><span class="n">adj</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orm</span><span class="o">.</span><span class="n">branch</span> <span class="o">=</span> <span class="s1">&#39;trunk&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">red</span><span class="o">.</span><span class="n">adj</span> <span class="o">==</span> <span class="n">blue</span><span class="o">.</span><span class="n">adj</span>
<span class="go">False</span>
</pre></div>
</div>
</section>
<section id="module-LiSE.allegedb">
<span id="orm"></span><h3>ORM<a class="headerlink" href="#module-LiSE.allegedb" title="Permalink to this heading">¶</a></h3>
<p>The main interface to the allegedb ORM</p>
<dl class="py exception">
<dt class="sig sig-object py" id="LiSE.allegedb.GraphNameError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.</span></span><span class="sig-name descname"><span class="pre">GraphNameError</span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#GraphNameError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.GraphNameError" title="Permalink to this definition">¶</a></dt>
<dd><p>For errors involving graphs’ names</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.</span></span><span class="sig-name descname"><span class="pre">ORM</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dbstring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sqlfilename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alchemy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_arranger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate this with the same string argument you’d use for a
SQLAlchemy <code class="docutils literal notranslate"><span class="pre">create_engine</span></code> call. This will be your interface to
allegedb.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.advancing">
<span class="sig-name descname"><span class="pre">advancing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.advancing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.advancing" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager for when time is moving forward one turn at a time.</p>
<p>When used in LiSE, this means that the game is being simulated.
It changes how the caching works, making it more efficient.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.batch">
<span class="sig-name descname"><span class="pre">batch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.batch" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager for when you’re creating lots of state.</p>
<p>Reads will be much slower in a batch, but writes will be faster.</p>
<p>You <em>can</em> combine this with <code class="docutils literal notranslate"><span class="pre">advancing</span></code> but it isn’t any faster.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Write changes to database and close the connection</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.commit">
<span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.commit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the state of all graphs and commit the transaction.</p>
<p>Also saves the current branch, turn, and tick.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.del_graph">
<span class="sig-name descname"><span class="pre">del_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.del_graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.del_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all traces of a graph’s existence from the database</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – name of an existing graph</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.delete_plan">
<span class="sig-name descname"><span class="pre">delete_plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.delete_plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.delete_plan" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the portion of a plan that has yet to occur.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>plan</strong> – integer ID of a plan, as given by
<code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">self.plan()</span> <span class="pre">as</span> <span class="pre">plan:</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.edge_cls">
<span class="sig-name descname"><span class="pre">edge_cls</span></span><a class="headerlink" href="#LiSE.allegedb.ORM.edge_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.allegedb.graph.Edge" title="LiSE.allegedb.graph.Edge"><code class="xref py py-class docutils literal notranslate"><span class="pre">Edge</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.get_delta">
<span class="sig-name descname"><span class="pre">get_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn_from</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick_from</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn_to</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick_to</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.get_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.get_delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dictionary describing changes to all graphs.</p>
<p>The keys are graph names. Their values are dictionaries of the
graphs’ attributes’ new values, with <code class="docutils literal notranslate"><span class="pre">None</span></code> for deleted keys. Also
in those graph dictionaries are special keys ‘node_val’ and
‘edge_val’ describing changes to node and edge attributes,
and ‘nodes’ and ‘edges’ full of booleans indicating whether a node
or edge exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.get_graph">
<span class="sig-name descname"><span class="pre">get_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#LiSE.allegedb.graph.DiGraph" title="LiSE.allegedb.graph.DiGraph"><span class="pre">DiGraph</span></a></span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.get_graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.get_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a graph previously created with <code class="docutils literal notranslate"><span class="pre">new_graph</span></code>,
<code class="docutils literal notranslate"><span class="pre">new_digraph</span></code>, <code class="docutils literal notranslate"><span class="pre">new_multigraph</span></code>, or
<code class="docutils literal notranslate"><span class="pre">new_multidigraph</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – name of an existing graph</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.get_turn_delta">
<span class="sig-name descname"><span class="pre">get_turn_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick_from</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick_to</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.get_turn_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.get_turn_delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dictionary describing changes made on a given turn.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">tick_to</span></code> is not supplied, report all changes after <code class="docutils literal notranslate"><span class="pre">tick_from</span></code>
(default 0).</p>
<p>The keys are graph names. Their values are dictionaries of the
graphs’ attributes’ new values, with <code class="docutils literal notranslate"><span class="pre">None</span></code> for deleted keys. Also
in those graph dictionaries are special keys ‘node_val’ and
‘edge_val’ describing changes to node and edge attributes,
and ‘nodes’ and ‘edges’ full of booleans indicating whether a node
or edge exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>branch</strong> – A branch of history; defaults to the current branch</p></li>
<li><p><strong>turn</strong> – The turn in the branch; defaults to the current turn</p></li>
<li><p><strong>tick_from</strong> – Starting tick; defaults to 0</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.is_parent_of">
<span class="sig-name descname"><span class="pre">is_parent_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">child</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.is_parent_of"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.is_parent_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether <code class="docutils literal notranslate"><span class="pre">child</span></code> is a branch descended from <code class="docutils literal notranslate"><span class="pre">parent</span></code> at
any remove.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.new_digraph">
<span class="sig-name descname"><span class="pre">new_digraph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#LiSE.allegedb.graph.DiGraph" title="LiSE.allegedb.graph.DiGraph"><span class="pre">DiGraph</span></a></span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.new_digraph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.new_digraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new instance of type DiGraph, initialized with the given
data if provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – a name for the graph</p></li>
<li><p><strong>data</strong> – dictionary or NetworkX graph object providing initial state</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.new_graph">
<span class="sig-name descname"><span class="pre">new_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.new_graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.new_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new instance of type Graph, initialized with the given
data if provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – a name for the graph</p></li>
<li><p><strong>data</strong> – dictionary or NetworkX graph object providing initial state</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.new_multidigraph">
<span class="sig-name descname"><span class="pre">new_multidigraph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.new_multidigraph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.new_multidigraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new instance of type MultiDiGraph, initialized with the given
data if provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – a name for the graph</p></li>
<li><p><strong>data</strong> – dictionary or NetworkX graph object providing initial state</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.new_multigraph">
<span class="sig-name descname"><span class="pre">new_multigraph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.new_multigraph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.new_multigraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new instance of type MultiGraph, initialized with the given
data if provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – a name for the graph</p></li>
<li><p><strong>data</strong> – dictionary or NetworkX graph object providing initial state</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.node_cls">
<span class="sig-name descname"><span class="pre">node_cls</span></span><a class="headerlink" href="#LiSE.allegedb.ORM.node_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.allegedb.graph.Node" title="LiSE.allegedb.graph.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.plan">
<span class="sig-name descname"><span class="pre">plan</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#LiSE.allegedb.PlanningContext" title="LiSE.allegedb.PlanningContext"><span class="pre">PlanningContext</span></a></span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.plan" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager for ‘hypothetical’ edits.</p>
<p>Start a block of code like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">orm</span><span class="o">.</span><span class="n">plan</span><span class="p">():</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>and any changes you make to the world state within that block will be
‘plans,’ meaning that they are used as defaults. The world will
obey your plan unless you make changes to the same entities outside
of the plan, in which case the world will obey those, and cancel any
future plan.</p>
<p>New branches cannot be started within plans. The <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">orm.forward():</span></code>
optimization is disabled within a <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">orm.plan():</span></code> block, so
consider another approach instead of making a very large plan.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.query_engine_cls">
<span class="sig-name descname"><span class="pre">query_engine_cls</span></span><a class="headerlink" href="#LiSE.allegedb.ORM.query_engine_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.allegedb.query.QueryEngine" title="LiSE.allegedb.query.QueryEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueryEngine</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.ORM.unload">
<span class="sig-name descname"><span class="pre">unload</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb.html#ORM.unload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.ORM.unload" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove everything from memory we can</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="LiSE.allegedb.OutOfTimelineError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.</span></span><span class="sig-name descname"><span class="pre">OutOfTimelineError</span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#OutOfTimelineError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.OutOfTimelineError" title="Permalink to this definition">¶</a></dt>
<dd><p>You tried to access a point in time that didn’t happen</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.PlanningContext">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.</span></span><span class="sig-name descname"><span class="pre">PlanningContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#LiSE.allegedb.ORM" title="LiSE.allegedb.ORM"><span class="pre">ORM</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb.html#PlanningContext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.PlanningContext" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager for ‘hypothetical’ edits.</p>
<p>Start a block of code like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">orm</span><span class="o">.</span><span class="n">plan</span><span class="p">():</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>and any changes you make to the world state within that block will be
‘plans,’ meaning that they are used as defaults. The world will
obey your plan unless you make changes to the same entities outside
of the plan, in which case the world will obey those, and cancel any
future plan.</p>
<p>New branches cannot be started within plans. The <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">orm.forward():</span></code>
optimization is disabled within a <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">orm.plan():</span></code> block, so
consider another approach instead of making a very large plan.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.TimeSignal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.</span></span><span class="sig-name descname"><span class="pre">TimeSignal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#LiSE.allegedb.ORM" title="LiSE.allegedb.ORM"><span class="pre">ORM</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Signal</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb.html#TimeSignal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.TimeSignal" title="Permalink to this definition">¶</a></dt>
<dd><p>Acts like a tuple of <code class="docutils literal notranslate"><span class="pre">(branch,</span> <span class="pre">turn)</span></code> for the most part.</p>
<p>This wraps a <code class="docutils literal notranslate"><span class="pre">Signal</span></code>. To set a function to be called whenever the
branch or turn changes, pass it to my <code class="docutils literal notranslate"><span class="pre">connect</span></code> method.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.TimeSignalDescriptor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.</span></span><span class="sig-name descname"><span class="pre">TimeSignalDescriptor</span></span><a class="reference internal" href="../_modules/LiSE/allegedb.html#TimeSignalDescriptor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.TimeSignalDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Acts like a tuple of <code class="docutils literal notranslate"><span class="pre">(branch,</span> <span class="pre">turn)</span></code> for the most part.</p>
<p>This wraps a <code class="docutils literal notranslate"><span class="pre">Signal</span></code>. To set a function to be called whenever the
branch or turn changes, pass it to my <code class="docutils literal notranslate"><span class="pre">connect</span></code> method.</p>
</dd></dl>

</section>
<section id="module-LiSE.allegedb.cache">
<span id="cache"></span><h3>cache<a class="headerlink" href="#module-LiSE.allegedb.cache" title="Permalink to this heading">¶</a></h3>
<p>Classes for in-memory storage and retrieval of historical graph data.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.cache.</span></span><span class="sig-name descname"><span class="pre">Cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kfkvs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#Cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.Cache" title="Permalink to this definition">¶</a></dt>
<dd><p>A data store that’s useful for tracking graph revisions.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.branches">
<span class="sig-name descname"><span class="pre">branches</span></span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.branches" title="Permalink to this definition">¶</a></dt>
<dd><p>A less structured alternative to <code class="docutils literal notranslate"><span class="pre">keys</span></code>.</p>
<p>For when you already know the entity and the key within it,
but still need to iterate through history to find the value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.contains_entity">
<span class="sig-name descname"><span class="pre">contains_entity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.contains_entity" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if an entity has a key at the given time, if entity specified.</p>
<p>Otherwise check if the entity exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.contains_entity_key">
<span class="sig-name descname"><span class="pre">contains_entity_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.contains_entity_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if an entity has a key at the given time, if entity specified.</p>
<p>Otherwise check if the entity exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.contains_entity_or_key">
<span class="sig-name descname"><span class="pre">contains_entity_or_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#Cache.contains_entity_or_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.Cache.contains_entity_or_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if an entity has a key at the given time, if entity specified.</p>
<p>Otherwise check if the entity exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.contains_key">
<span class="sig-name descname"><span class="pre">contains_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.contains_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if an entity has a key at the given time, if entity specified.</p>
<p>Otherwise check if the entity exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.count_entities">
<span class="sig-name descname"><span class="pre">count_entities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.count_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of keys an entity has, if you specify an entity.</p>
<p>Otherwise return the number of entities.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.count_entities_or_keys">
<span class="sig-name descname"><span class="pre">count_entities_or_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#Cache.count_entities_or_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.Cache.count_entities_or_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of keys an entity has, if you specify an entity.</p>
<p>Otherwise return the number of entities.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.count_entity_keys">
<span class="sig-name descname"><span class="pre">count_entity_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.count_entity_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of keys an entity has, if you specify an entity.</p>
<p>Otherwise return the number of entities.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.count_keys">
<span class="sig-name descname"><span class="pre">count_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.count_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of keys an entity has, if you specify an entity.</p>
<p>Otherwise return the number of entities.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.iter_entities">
<span class="sig-name descname"><span class="pre">iter_entities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.iter_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the keys an entity has, if you specify an entity.</p>
<p>Otherwise iterate over the entities themselves, or at any rate the
tuple specifying which entity.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.iter_entities_or_keys">
<span class="sig-name descname"><span class="pre">iter_entities_or_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#Cache.iter_entities_or_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.Cache.iter_entities_or_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the keys an entity has, if you specify an entity.</p>
<p>Otherwise iterate over the entities themselves, or at any rate the
tuple specifying which entity.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.iter_entity_keys">
<span class="sig-name descname"><span class="pre">iter_entity_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.iter_entity_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the keys an entity has, if you specify an entity.</p>
<p>Otherwise iterate over the entities themselves, or at any rate the
tuple specifying which entity.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.iter_keys">
<span class="sig-name descname"><span class="pre">iter_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.iter_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the keys an entity has, if you specify an entity.</p>
<p>Otherwise iterate over the entities themselves, or at any rate the
tuple specifying which entity.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.keycache">
<span class="sig-name descname"><span class="pre">keycache</span></span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.keycache" title="Permalink to this definition">¶</a></dt>
<dd><p>Keys an entity has at a given turn and tick.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.keyframe">
<span class="sig-name descname"><span class="pre">keyframe</span></span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.keyframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Key-value dictionaries representing my state at a given time</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Cache of entity data keyed by the entities themselves.</p>
<p>That means the whole tuple identifying the entity is the
top-level key in this cache here. The second-to-top level
is the key within the entity.</p>
<p>Deeper layers of this cache are keyed by branch, turn, and tick.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#Cache.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.Cache.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a bunch of data. Must be in chronological order.</p>
<p>But it doesn’t need to all be from the same branch, as long as
each branch is chronological of itself.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.parents">
<span class="sig-name descname"><span class="pre">parents</span></span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.parents" title="Permalink to this definition">¶</a></dt>
<dd><p>Entity data keyed by the entities’ parents.</p>
<p>An entity’s parent is what it’s contained in. When speaking of a node,
this is its graph. When speaking of an edge, the parent is usually the
graph and the origin in a pair, though for multigraphs the destination
might be part of the parent as well.</p>
<p>Deeper layers of this cache are keyed by branch and revision.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.presettings">
<span class="sig-name descname"><span class="pre">presettings</span></span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.presettings" title="Permalink to this definition">¶</a></dt>
<dd><p>The values prior to <code class="docutils literal notranslate"><span class="pre">entity[key]</span> <span class="pre">=</span> <span class="pre">value</span></code> settings on some turn</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#Cache.remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.Cache.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all data from a specific tick</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.retrieve">
<span class="sig-name descname"><span class="pre">retrieve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#Cache.retrieve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.Cache.retrieve" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a value previously .store(…)’d.</p>
<p>Needs at least five arguments. The -1th is the tick
within the turn you want,
the -2th is that turn, the -3th is the branch,
and the -4th is the key. All other arguments identify
the entity that the key is in.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.settings">
<span class="sig-name descname"><span class="pre">settings</span></span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.settings" title="Permalink to this definition">¶</a></dt>
<dd><p>All the <code class="docutils literal notranslate"><span class="pre">entity[key]</span> <span class="pre">=</span> <span class="pre">value</span></code> settings on some turn</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.shallowest">
<span class="sig-name descname"><span class="pre">shallowest</span></span><a class="headerlink" href="#LiSE.allegedb.cache.Cache.shallowest" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary for plain, unstructured hinting.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.Cache.store">
<span class="sig-name descname"><span class="pre">store</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">planning</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loading</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#Cache.store"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.Cache.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Put a value in various dictionaries for later .retrieve(…).</p>
<p>Needs at least five arguments, of which the -1th is the value
to store, the -2th is the tick to store it at, the -3th
is the turn to store it in, the -4th is the branch the
revision is in, the -5th is the key the value is for,
and the remaining arguments identify the entity that has
the key, eg. a graph, node, or edge.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">planning=True</span></code>, you will be permitted to alter
“history” that takes place after the last non-planning
moment of time, without much regard to consistency.
Otherwise, contradictions will be handled by deleting
everything in the contradicted plan after the present moment,
unless you set <code class="docutils literal notranslate"><span class="pre">contra=False</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">loading=True</span></code> prevents me from updating the ORM’s records
of the ends of branches and turns.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.EdgesCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.cache.</span></span><span class="sig-name descname"><span class="pre">EdgesCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#EdgesCache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.EdgesCache" title="Permalink to this definition">¶</a></dt>
<dd><p>A cache for remembering whether edges exist at a given time.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.EdgesCache.count_predecessors">
<span class="sig-name descname"><span class="pre">count_predecessors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#EdgesCache.count_predecessors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.EdgesCache.count_predecessors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of predecessors from a destination node at a time.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.EdgesCache.count_successors">
<span class="sig-name descname"><span class="pre">count_successors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#EdgesCache.count_successors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.EdgesCache.count_successors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of successors to an origin node at a given time.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.EdgesCache.has_predecessor">
<span class="sig-name descname"><span class="pre">has_predecessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#EdgesCache.has_predecessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.EdgesCache.has_predecessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether an edge connects the destination to the origin now</p>
<p>Doesn’t require the edge’s index, which makes it slower than retrieving
a particular edge.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.EdgesCache.has_successor">
<span class="sig-name descname"><span class="pre">has_successor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#EdgesCache.has_successor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.EdgesCache.has_successor" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether an edge connects the origin to the destination now</p>
<p>Doesn’t require the edge’s index, which makes it slower than retrieving
a particular edge.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.EdgesCache.iter_predecessors">
<span class="sig-name descname"><span class="pre">iter_predecessors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#EdgesCache.iter_predecessors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.EdgesCache.iter_predecessors" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over predecessors to a destination node at a given time.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.EdgesCache.iter_successors">
<span class="sig-name descname"><span class="pre">iter_successors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#EdgesCache.iter_successors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.EdgesCache.iter_successors" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over successors of a given origin node at a given time.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.EdgesCache.store">
<span class="sig-name descname"><span class="pre">store</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ex</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">planning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loading</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#EdgesCache.store"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.EdgesCache.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Put a value in various dictionaries for later .retrieve(…).</p>
<p>Needs at least five arguments, of which the -1th is the value
to store, the -2th is the tick to store it at, the -3th
is the turn to store it in, the -4th is the branch the
revision is in, the -5th is the key the value is for,
and the remaining arguments identify the entity that has
the key, eg. a graph, node, or edge.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">planning=True</span></code>, you will be permitted to alter
“history” that takes place after the last non-planning
moment of time, without much regard to consistency.
Otherwise, contradictions will be handled by deleting
everything in the contradicted plan after the present moment,
unless you set <code class="docutils literal notranslate"><span class="pre">contra=False</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">loading=True</span></code> prevents me from updating the ORM’s records
of the ends of branches and turns.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.NodesCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.cache.</span></span><span class="sig-name descname"><span class="pre">NodesCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kfkvs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#NodesCache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.NodesCache" title="Permalink to this definition">¶</a></dt>
<dd><p>A cache for remembering whether nodes exist at a given time.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.NodesCache.store">
<span class="sig-name descname"><span class="pre">store</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ex</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">planning</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loading</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#NodesCache.store"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.NodesCache.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Put a value in various dictionaries for later .retrieve(…).</p>
<p>Needs at least five arguments, of which the -1th is the value
to store, the -2th is the tick to store it at, the -3th
is the turn to store it in, the -4th is the branch the
revision is in, the -5th is the key the value is for,
and the remaining arguments identify the entity that has
the key, eg. a graph, node, or edge.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">planning=True</span></code>, you will be permitted to alter
“history” that takes place after the last non-planning
moment of time, without much regard to consistency.
Otherwise, contradictions will be handled by deleting
everything in the contradicted plan after the present moment,
unless you set <code class="docutils literal notranslate"><span class="pre">contra=False</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">loading=True</span></code> prevents me from updating the ORM’s records
of the ends of branches and turns.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.PickyDefaultDict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.cache.</span></span><span class="sig-name descname"><span class="pre">PickyDefaultDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type:</span> <span class="pre">type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args_munger:</span> <span class="pre">callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_default_args_munger&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs_munger:</span> <span class="pre">callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_default_kwargs_munger&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#PickyDefaultDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.PickyDefaultDict" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">defaultdict</span></code> alternative that requires values of a specific type.</p>
<p>Pass some type object (such as a class) to the constructor to
specify what type to use by default, which is the only type I will
accept.</p>
<p>Default values are constructed with no arguments by default;
supply <code class="docutils literal notranslate"><span class="pre">args_munger</span></code> and/or <code class="docutils literal notranslate"><span class="pre">kwargs_munger</span></code> to override this.
They take arguments <code class="docutils literal notranslate"><span class="pre">self</span></code> and the unused key being looked up.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.StructuredDefaultDict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.cache.</span></span><span class="sig-name descname"><span class="pre">StructuredDefaultDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">layers:</span> <span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type:</span> <span class="pre">~typing.Optional[type]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args_munger:</span> <span class="pre">callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_default_args_munger&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs_munger:</span> <span class="pre">callable</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">_default_kwargs_munger&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gettest=&lt;function</span> <span class="pre">StructuredDefaultDict.&lt;lambda&gt;&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">settest=&lt;function</span> <span class="pre">StructuredDefaultDict.&lt;lambda&gt;&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#StructuredDefaultDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.StructuredDefaultDict" title="Permalink to this definition">¶</a></dt>
<dd><p>A <cite>defaultdict</cite>-like class with values stored at a specific depth.</p>
<p>Requires an integer to tell it how many layers deep to go.
The innermost layer will be <code class="docutils literal notranslate"><span class="pre">PickyDefaultDict</span></code>, which will take the
<code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">args_munger</span></code>, and <code class="docutils literal notranslate"><span class="pre">kwargs_munger</span></code> arguments supplied
to my constructor.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="LiSE.allegedb.cache.lru_append">
<span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.cache.</span></span><span class="sig-name descname"><span class="pre">lru_append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lru</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kckey</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxsize</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/cache.html#lru_append"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.cache.lru_append" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete old data from <code class="docutils literal notranslate"><span class="pre">kc</span></code>, then add new <code class="docutils literal notranslate"><span class="pre">kckey</span></code> to <code class="docutils literal notranslate"><span class="pre">lru</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kc</strong> – a three-layer keycache</p></li>
<li><p><strong>lru</strong> – an <code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedDict</span></code> with a key for each triple that should
fill out <code class="docutils literal notranslate"><span class="pre">kc</span></code>’s three layers</p></li>
<li><p><strong>kckey</strong> – a triple that indexes into <code class="docutils literal notranslate"><span class="pre">kc</span></code>, which will be added to
<code class="docutils literal notranslate"><span class="pre">lru</span></code> if needed</p></li>
<li><p><strong>maxsize</strong> – maximum number of entries in <code class="docutils literal notranslate"><span class="pre">lru</span></code> and, therefore, <code class="docutils literal notranslate"><span class="pre">kc</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-LiSE.allegedb.graph">
<span id="graph"></span><h3>graph<a class="headerlink" href="#module-LiSE.allegedb.graph" title="Permalink to this heading">¶</a></h3>
<p>allegedb’s special implementations of the NetworkX graph objects</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.AbstractEntityMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">AbstractEntityMapping</span></span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#AbstractEntityMapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.AbstractEntityMapping" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.AbstractSuccessors">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">AbstractSuccessors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#AbstractSuccessors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.AbstractSuccessors" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.AbstractSuccessors.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#AbstractSuccessors.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.AbstractSuccessors.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete every edge with origin at my orig</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.AbstractSuccessors.db">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">db</span></span><a class="headerlink" href="#LiSE.allegedb.graph.AbstractSuccessors.db" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias to <code class="docutils literal notranslate"><span class="pre">self.graph.db</span></code></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.AllegedMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">AllegedMapping</span></span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#AllegedMapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.AllegedMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Common amenities for mappings</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.AllegedMapping.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#AllegedMapping.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.AllegedMapping.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete everything</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.AllegedMapping.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#AllegedMapping.connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.AllegedMapping.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Arrange to call this function whenever something changes here.</p>
<p>The arguments will be this object, the key changed, and the value set.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.AllegedMapping.disconnect">
<span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#AllegedMapping.disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.AllegedMapping.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>No longer call the function when something changes here.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.AllegedMapping.send">
<span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sender</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#AllegedMapping.send"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.AllegedMapping.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal. Call connected functions.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">DiGraph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#DiGraph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph" title="Permalink to this definition">¶</a></dt>
<dd><p>A version of the networkx.DiGraph class that stores its state in a
database.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.add_edge">
<span class="sig-name descname"><span class="pre">add_edge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attr_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#DiGraph.add_edge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.add_edge" title="Permalink to this definition">¶</a></dt>
<dd><p>Version of add_edge that only writes to the database once</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.add_edges_from">
<span class="sig-name descname"><span class="pre">add_edges_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ebunch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attr_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#DiGraph.add_edges_from"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.add_edges_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Version of add_edges_from that only writes to the database once</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.add_node">
<span class="sig-name descname"><span class="pre">add_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_for_adding</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#DiGraph.add_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.add_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Version of add_node that minimizes writes</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.adj">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">adj</span></span><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.adj" title="Permalink to this definition">¶</a></dt>
<dd><p>Graph adjacency object holding the neighbors of each node.</p>
<p>This object is a read-only dict-like structure with node keys
and neighbor-dict values.  The neighbor-dict is keyed by neighbor
to the edge-data-dict.  So <cite>G.adj[3][2][‘color’] = ‘blue’</cite> sets
the color of the edge <cite>(3, 2)</cite> to <cite>“blue”</cite>.</p>
<p>Iterating over G.adj behaves like a dict. Useful idioms include
<cite>for nbr, datadict in G.adj[n].items():</cite>.</p>
<p>The neighbor information is also provided by subscripting the graph.
So <cite>for nbr, foovalue in G[node].data(‘foo’, default=1):</cite> works.</p>
<p>For directed graphs, <cite>G.adj</cite> holds outgoing (successor) info.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.adj_cls">
<span class="sig-name descname"><span class="pre">adj_cls</span></span><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.adj_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.allegedb.graph.DiGraphSuccessorsMapping" title="LiSE.allegedb.graph.DiGraphSuccessorsMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiGraphSuccessorsMapping</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#DiGraph.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all nodes and edges from the graph.</p>
<p>Unlike the regular networkx implementation, this does <em>not</em>
remove the graph’s name. But all the other graph, node, and
edge attributes go away.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.edge">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">edge</span></span><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.edge" title="Permalink to this definition">¶</a></dt>
<dd><p>Graph adjacency object holding the neighbors of each node.</p>
<p>This object is a read-only dict-like structure with node keys
and neighbor-dict values.  The neighbor-dict is keyed by neighbor
to the edge-data-dict.  So <cite>G.adj[3][2][‘color’] = ‘blue’</cite> sets
the color of the edge <cite>(3, 2)</cite> to <cite>“blue”</cite>.</p>
<p>Iterating over G.adj behaves like a dict. Useful idioms include
<cite>for nbr, datadict in G.adj[n].items():</cite>.</p>
<p>The neighbor information is also provided by subscripting the graph.
So <cite>for nbr, foovalue in G[node].data(‘foo’, default=1):</cite> works.</p>
<p>For directed graphs, <cite>G.adj</cite> holds outgoing (successor) info.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.graph_map_cls">
<span class="sig-name descname"><span class="pre">graph_map_cls</span></span><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.graph_map_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.allegedb.graph.GraphMapping" title="LiSE.allegedb.graph.GraphMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">GraphMapping</span></code></a></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.name" title="Permalink to this definition">¶</a></dt>
<dd><p>String identifier of the graph.</p>
<p>This graph attribute appears in the attribute dict G.graph
keyed by the string <cite>“name”</cite>. as well as an attribute (technically
a property) <cite>G.name</cite>. This is entirely user controlled.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.node_map_cls">
<span class="sig-name descname"><span class="pre">node_map_cls</span></span><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.node_map_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.allegedb.graph.GraphNodeMapping" title="LiSE.allegedb.graph.GraphNodeMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">GraphNodeMapping</span></code></a></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.pred">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pred</span></span><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.pred" title="Permalink to this definition">¶</a></dt>
<dd><p>Graph adjacency object holding the predecessors of each node.</p>
<p>This object is a read-only dict-like structure with node keys
and neighbor-dict values.  The neighbor-dict is keyed by neighbor
to the edge-data-dict.  So <cite>G.pred[2][3][‘color’] = ‘blue’</cite> sets
the color of the edge <cite>(3, 2)</cite> to <cite>“blue”</cite>.</p>
<p>Iterating over G.pred behaves like a dict. Useful idioms include
<cite>for nbr, datadict in G.pred[n].items():</cite>.  A data-view not provided
by dicts also exists: <cite>for nbr, foovalue in G.pred[node].data(‘foo’):</cite>
A default can be set via a <cite>default</cite> argument to the <cite>data</cite> method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.pred_cls">
<span class="sig-name descname"><span class="pre">pred_cls</span></span><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.pred_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#LiSE.allegedb.graph.DiGraphPredecessorsMapping" title="LiSE.allegedb.graph.DiGraphPredecessorsMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiGraphPredecessorsMapping</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.remove_edge">
<span class="sig-name descname"><span class="pre">remove_edge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#DiGraph.remove_edge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.remove_edge" title="Permalink to this definition">¶</a></dt>
<dd><p>Version of remove_edge that’s much like normal networkx but only
deletes once, since the database doesn’t keep separate adj and
succ mappings</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.remove_edges_from">
<span class="sig-name descname"><span class="pre">remove_edges_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ebunch</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#DiGraph.remove_edges_from"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.remove_edges_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Version of remove_edges_from that’s much like normal networkx but only
deletes once, since the database doesn’t keep separate adj and
succ mappings</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.remove_node">
<span class="sig-name descname"><span class="pre">remove_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#DiGraph.remove_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.remove_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Version of remove_node that minimizes writes</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraph.succ">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">succ</span></span><a class="headerlink" href="#LiSE.allegedb.graph.DiGraph.succ" title="Permalink to this definition">¶</a></dt>
<dd><p>Graph adjacency object holding the successors of each node.</p>
<p>This object is a read-only dict-like structure with node keys
and neighbor-dict values.  The neighbor-dict is keyed by neighbor
to the edge-data-dict.  So <cite>G.succ[3][2][‘color’] = ‘blue’</cite> sets
the color of the edge <cite>(3, 2)</cite> to <cite>“blue”</cite>.</p>
<p>Iterating over G.succ behaves like a dict. Useful idioms include
<cite>for nbr, datadict in G.succ[n].items():</cite>.  A data-view not provided
by dicts also exists: <cite>for nbr, foovalue in G.succ[node].data(‘foo’):</cite>
and a default can be set via a <cite>default</cite> argument to the <cite>data</cite> method.</p>
<p>The neighbor information is also provided by subscripting the graph.
So <cite>for nbr, foovalue in G[node].data(‘foo’, default=1):</cite> works.</p>
<p>For directed graphs, <cite>G.adj</cite> is identical to <cite>G.succ</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraphPredecessorsMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">DiGraphPredecessorsMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#DiGraphPredecessorsMapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.DiGraphPredecessorsMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping for Predecessors instances, which map to Edges that end at
the dest provided to this</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraphPredecessorsMapping.Predecessors">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Predecessors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#DiGraphPredecessorsMapping.Predecessors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.DiGraphPredecessorsMapping.Predecessors" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping of Edges that end at a particular node</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraphSuccessorsMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">DiGraphSuccessorsMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#DiGraphSuccessorsMapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.DiGraphSuccessorsMapping" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.DiGraphSuccessorsMapping.Successors">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Successors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#DiGraphSuccessorsMapping.Successors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.DiGraphSuccessorsMapping.Successors" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.Edge">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">Edge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#Edge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.Edge" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping for edge attributes</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.EntityCollisionError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">EntityCollisionError</span></span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#EntityCollisionError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.EntityCollisionError" title="Permalink to this definition">¶</a></dt>
<dd><p>For when there’s a discrepancy between the kind of entity you’re creating and the one by the same name</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.GraphEdgeMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">GraphEdgeMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#GraphEdgeMapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.GraphEdgeMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides an adjacency mapping and possibly a predecessor mapping
for a graph.</p>
<dl class="py property">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.GraphEdgeMapping.db">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">db</span></span><a class="headerlink" href="#LiSE.allegedb.graph.GraphEdgeMapping.db" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias to <code class="docutils literal notranslate"><span class="pre">self.graph.db</span></code></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.GraphMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">GraphMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#GraphMapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.GraphMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping for graph attributes</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.GraphMapping.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#GraphMapping.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.GraphMapping.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete everything</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.GraphMapping.unwrap">
<span class="sig-name descname"><span class="pre">unwrap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#GraphMapping.unwrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.GraphMapping.unwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Deep copy myself as a dict, all contents unwrapped</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.GraphNodeMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">GraphNodeMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#GraphNodeMapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.GraphNodeMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping for nodes in a graph</p>
<dl class="py property">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.GraphNodeMapping.db">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">db</span></span><a class="headerlink" href="#LiSE.allegedb.graph.GraphNodeMapping.db" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias to <code class="docutils literal notranslate"><span class="pre">self.graph.db</span></code></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.GraphSuccessorsMapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">GraphSuccessorsMapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#GraphSuccessorsMapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.GraphSuccessorsMapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping for Successors (itself a MutableMapping)</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.GraphSuccessorsMapping.Successors">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Successors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#GraphSuccessorsMapping.Successors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.GraphSuccessorsMapping.Successors" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.Node">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">Node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clobber</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#Node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.Node" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping for node attributes</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.convert_to_networkx_graph">
<span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">convert_to_networkx_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_using</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multigraph_input</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#convert_to_networkx_graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.convert_to_networkx_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an AllegedGraph to the corresponding NetworkX graph type.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="LiSE.allegedb.graph.getatt">
<span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.graph.</span></span><span class="sig-name descname"><span class="pre">getatt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attribute_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/graph.html#getatt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.graph.getatt" title="Permalink to this definition">¶</a></dt>
<dd><p>An easy way to make an alias</p>
</dd></dl>

</section>
<section id="id1">
<h3>query<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<span class="target" id="module-LiSE.allegedb.query"></span><p>Wrapper to run SQL queries in a lightly abstracted way, such that
code that’s more to do with the queries than with the data per se
doesn’t pollute the other files so much.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.query.GlobalKeyValueStore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.query.</span></span><span class="sig-name descname"><span class="pre">GlobalKeyValueStore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qe</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#GlobalKeyValueStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.GlobalKeyValueStore" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict-like object that keeps its contents in a table.</p>
<p>Mostly this is for holding the current branch and revision.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.query.</span></span><span class="sig-name descname"><span class="pre">QueryEngine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dbstring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alchemy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strings_filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pack</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unpack</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around either a DBAPI2.0 connection or an
Alchemist. Provides methods to run queries using either.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.all_branches">
<span class="sig-name descname"><span class="pre">all_branches</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.all_branches"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.all_branches" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all the branch data in tuples of (branch, parent,
parent_turn).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the transaction, then close the connection</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.commit">
<span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.commit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the transaction</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.del_graph">
<span class="sig-name descname"><span class="pre">del_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.del_graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.del_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all records to do with the graph</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.edge_val_dump">
<span class="sig-name descname"><span class="pre">edge_val_dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.10)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.edge_val_dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.edge_val_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield the entire contents of the edge_val table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.edge_val_set">
<span class="sig-name descname"><span class="pre">edge_val_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.edge_val_set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.edge_val_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set this key of this edge to this value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.edges_dump">
<span class="sig-name descname"><span class="pre">edges_dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.10)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.edges_dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.edges_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the entire contents of the edges table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.exist_edge">
<span class="sig-name descname"><span class="pre">exist_edge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extant</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.exist_edge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.exist_edge" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare whether or not this edge exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.exist_node">
<span class="sig-name descname"><span class="pre">exist_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extant</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.exist_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.exist_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare that the node exists or doesn’t.</p>
<p>Inserts a new record or updates an old one, as needed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Put all pending changes into the SQL transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.global_del">
<span class="sig-name descname"><span class="pre">global_del</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.global_del"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.global_del" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the global record for the key.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.global_get">
<span class="sig-name descname"><span class="pre">global_get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.global_get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.global_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value for the given key in the <code class="docutils literal notranslate"><span class="pre">globals</span></code> table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.global_items">
<span class="sig-name descname"><span class="pre">global_items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.global_items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.global_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over (key, value) pairs in the <code class="docutils literal notranslate"><span class="pre">globals</span></code> table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.global_set">
<span class="sig-name descname"><span class="pre">global_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.global_set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.global_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set <code class="docutils literal notranslate"><span class="pre">key</span></code> to <code class="docutils literal notranslate"><span class="pre">value</span></code> globally (not at any particular branch or
revision)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.graph_type">
<span class="sig-name descname"><span class="pre">graph_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.graph_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.graph_type" title="Permalink to this definition">¶</a></dt>
<dd><p>What type of graph is this?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.graph_val_dump">
<span class="sig-name descname"><span class="pre">graph_val_dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.10)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.graph_val_dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.graph_val_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield the entire contents of the graph_val table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.have_branch">
<span class="sig-name descname"><span class="pre">have_branch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branch</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.have_branch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.have_branch" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether the branch thus named exists in the database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.have_graph">
<span class="sig-name descname"><span class="pre">have_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.have_graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.have_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether I have a graph by this name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.new_branch">
<span class="sig-name descname"><span class="pre">new_branch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_turn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_tick</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.new_branch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.new_branch" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare that the <code class="docutils literal notranslate"><span class="pre">branch</span></code> is descended from <code class="docutils literal notranslate"><span class="pre">parent</span></code> at
<code class="docutils literal notranslate"><span class="pre">parent_turn</span></code>, <code class="docutils literal notranslate"><span class="pre">parent_tick</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.new_graph">
<span class="sig-name descname"><span class="pre">new_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">typ</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.new_graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.new_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare a new graph by this name of this type.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.node_val_dump">
<span class="sig-name descname"><span class="pre">node_val_dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.10)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.node_val_dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.node_val_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield the entire contents of the node_val table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.node_val_set">
<span class="sig-name descname"><span class="pre">node_val_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.node_val_set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.node_val_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a key-value pair on a node at a specific branch and revision</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.nodes_dump">
<span class="sig-name descname"><span class="pre">nodes_dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.10)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.10)"><span class="pre">Hashable</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.nodes_dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.nodes_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the entire contents of the nodes table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.query.QueryEngine.truncate_all">
<span class="sig-name descname"><span class="pre">truncate_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#QueryEngine.truncate_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.QueryEngine.truncate_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all data from every table</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="LiSE.allegedb.query.TimeError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.query.</span></span><span class="sig-name descname"><span class="pre">TimeError</span></span><a class="reference internal" href="../_modules/LiSE/allegedb/query.html#TimeError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.query.TimeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception class for problems with the time model</p>
</dd></dl>

</section>
<section id="module-LiSE.allegedb.wrap">
<span id="wrap"></span><h3>wrap<a class="headerlink" href="#module-LiSE.allegedb.wrap" title="Permalink to this heading">¶</a></h3>
<p>Wrapper classes to let you store mutable data types in the allegedb ORM</p>
<p>The wrapper objects act like regular mutable objects, but write a new copy
of themselves to allegedb every time they are changed.</p>
<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.DictWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">DictWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#DictWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.DictWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary synchronized with a serialized field.</p>
<p>This is meant to be used in allegedb entities (graph, node, or
edge), for when the user stores a dictionary in them.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.ListWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">ListWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#ListWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.ListWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>A list synchronized with a serialized field.</p>
<p>This is meant to be used in allegedb entities (graph, node, or
edge), for when the user stores a list in them.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.ListWrapper.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#ListWrapper.append"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.ListWrapper.append" title="Permalink to this definition">¶</a></dt>
<dd><p>S.append(value) – append value to the end of the sequence</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.ListWrapper.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#ListWrapper.insert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.ListWrapper.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>S.insert(index, value) – insert value before index</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.ListWrapper.unwrap">
<span class="sig-name descname"><span class="pre">unwrap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#ListWrapper.unwrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.ListWrapper.unwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Deep copy myself as a list, with all contents unwrapped</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableMappingUnwrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">MutableMappingUnwrapper</span></span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableMappingUnwrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableMappingUnwrapper" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableMappingUnwrapper.unwrap">
<span class="sig-name descname"><span class="pre">unwrap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableMappingUnwrapper.unwrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableMappingUnwrapper.unwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Deep copy myself as a dict, all contents unwrapped</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableMappingWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">MutableMappingWrapper</span></span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableMappingWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableMappingWrapper" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableMappingWrapper.unwrap">
<span class="sig-name descname"><span class="pre">unwrap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableMappingWrapper.unwrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableMappingWrapper.unwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Deep copy myself as a dict, all contents unwrapped</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableSequenceWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">MutableSequenceWrapper</span></span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableSequenceWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableSequenceWrapper" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableSequenceWrapper.unwrap">
<span class="sig-name descname"><span class="pre">unwrap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableSequenceWrapper.unwrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableSequenceWrapper.unwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Deep copy myself as a list, all contents unwrapped</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">MutableWrapper</span></span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableWrapper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableWrapperDictList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">MutableWrapperDictList</span></span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableWrapperDictList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableWrapperDictList" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableWrapperSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">MutableWrapperSet</span></span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableWrapperSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableWrapperSet" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableWrapperSet.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">element</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableWrapperSet.add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableWrapperSet.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an element.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableWrapperSet.discard">
<span class="sig-name descname"><span class="pre">discard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">element</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableWrapperSet.discard"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableWrapperSet.discard" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an element.  Do not raise an exception if absent.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableWrapperSet.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableWrapperSet.pop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableWrapperSet.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the popped value.  Raise KeyError if empty.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableWrapperSet.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">element</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableWrapperSet.remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableWrapperSet.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an element. If not a member, raise a KeyError.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.MutableWrapperSet.unwrap">
<span class="sig-name descname"><span class="pre">unwrap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#MutableWrapperSet.unwrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.MutableWrapperSet.unwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Deep copy myself as a set, all contents unwrapped</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.SetWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">SetWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#SetWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.SetWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>A set synchronized with a serialized field.</p>
<p>This is meant to be used in allegedb entities (graph, node, or
edge), for when the user stores a set in them.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.SubDictWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">SubDictWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#SubDictWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.SubDictWrapper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.SubListWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">SubListWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#SubListWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.SubListWrapper" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.SubListWrapper.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#SubListWrapper.append"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.SubListWrapper.append" title="Permalink to this definition">¶</a></dt>
<dd><p>S.append(value) – append value to the end of the sequence</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.SubListWrapper.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#SubListWrapper.insert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.SubListWrapper.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>S.insert(index, value) – insert value before index</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.SubSetWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">SubSetWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#SubSetWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.SubSetWrapper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="LiSE.allegedb.wrap.UnwrappingDict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LiSE.allegedb.wrap.</span></span><span class="sig-name descname"><span class="pre">UnwrappingDict</span></span><a class="reference internal" href="../_modules/LiSE/allegedb/wrap.html#UnwrappingDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LiSE.allegedb.wrap.UnwrappingDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict that stores the data from the wrapper classes</p>
<p>Won’t store those objects themselves.</p>
</dd></dl>

</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">LiSE</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../manual.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">LiSE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#world-modelling">World Modelling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rule-creation">Rule Creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#time-control">Time Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="#input-prompts">Input Prompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-LiSE.engine">engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-LiSE.node">node</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-LiSE.place">place</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-LiSE.thing">thing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-LiSE.portal">portal</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-LiSE.rule">rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-LiSE.query">query</a></li>
<li class="toctree-l2"><a class="reference internal" href="#allegedb">allegedb</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#usage">usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-LiSE.allegedb">ORM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-LiSE.allegedb.cache">cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-LiSE.allegedb.graph">graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">query</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-LiSE.allegedb.wrap">wrap</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ELiDE/index.html">ELiDE</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../manual.html" title="previous chapter">Introduction</a></li>
      <li>Next: <a href="../ELiDE/index.html" title="next chapter">ELiDE</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;Zachary Spector.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.1.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/LiSE/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>